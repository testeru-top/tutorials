---
tags: note
status: done
priority: 6
time: 2022-05-25 11:39
things:  "[ğŸ§Š](things:///show?id=JtkDsmtmq6Bd8ZbzKBJTW4)"
---

# æ³¨è§£+xml
- ä¼ä¸šä¸»æµçš„å¼€å‘â½…å¼

æ³¨æ„ï¼š
- [p] å¾€å¾€ç¬¬ä¸‰â½…`jar`ä¸­çš„å¯¹è±¡æˆ‘ä»¬ä½¿â½¤`xml`é…ç½®
	- [i] â½å¦‚ï¼š`druid`æ•°æ®åº“è¿æ¥æ± ã€`Mybatis`çš„`SQLSessionFactory`
- [p] `service`å±‚å’Œ`dao`å±‚çš„å®ç°ç±»ï¼Œè¿™å±äºæˆ‘ä»¬â¾ƒâ¼°å†™çš„ä»£ç ï¼Œå¾€å¾€ä¼šä½¿â½¤æ³¨è§£

ä»¥ä¸Šå°±æ˜¯==åŠxmlåŠæ³¨è§£==çš„æ¨¡å¼


# Springæ³¨è§£å¼€å‘
>å¸¸ç”¨æ³¨è§£35ä¸ª 
## beanæ ‡ç­¾å’Œæ³¨è§£çš„å¯¹åº”



### @Component
- `bean`æ ‡ç­¾å¯¹åº”æ³¨è§£`@Component`

```xml
<!--    serviceå¯¼å…¥   idï¼š@Component("accountService")     
        scopeï¼š@Scope("singleton")-->  
<bean id="accountService" class="top.testeru.service.impl.AccountServiceImpl" scope="singleton">
    <!-- @Autowired-->  
    <property name="accountDao" ref="accountDao"></property>  
</bean>
```
- [i] `@Component`æ³¨è§£å±æ€§`value`ï¼š`bean`æ ‡ç­¾çš„`id`å±æ€§
- [i]  `@Component`ä¸æŒ‡å®š`value`å±æ€§ï¼Œé»˜è®¤å°±æ˜¯==ç±»å==ï¼Œ==â¾¸å­—âºŸâ¼©å†™==
- [p] è¯¥æ³¨è§£è¡â½£å‡ºäº†ä¸‰ä¸ªæ³¨è§£ï¼Œ==`@Controller`,`@Service`,`@Repository`==ï¼Œâ½¤æ³•å’Œ`@Componet`â¼€è‡´ï¼Œä¸ºäº†æ›´åŠ æ¸…æ™°çš„æç°å±‚çš„æ¦‚å¿µ

```java
//@Component  
@Service  
//@Scope("singleton")
public class AccountServiceImpl implements AccountService {
	//ä¸éœ€è¦set
	@Autowired
	private AccountDao accountDao;
}
```
### @Scope
- `bean`æ ‡ç­¾å±æ€§`scope`å¯¹åº”æ³¨è§£
- [p] æ³¨è§£å±æ€§`value`ï¼š`singleton`ï¼Œ`prototype`
```java
@Scope("singleton")
public class AccountServiceImpl implements AccountService {}
```

### @PostConstruct
- [p] `bean`æ ‡ç­¾å±æ€§`init-method`å¯¹åº”æ³¨è§£`@PostConstruct`
### @PreDestroy
- [p] `bean`æ ‡ç­¾å±æ€§`destroy-method`å¯¹åº”æ³¨è§£`@PreDestroy`


## ä¾èµ–æ³¨â¼Šæ³¨è§£
### @Autowiredæ³¨è§£ï¼ˆSpringæ¡†æ¶æä¾›ï¼‰
- [l] æŒ‰ç…§ç±»å‹æ³¨â¼Šï¼Œå¦‚æœâ½†æ³•ç¡®å®šå”¯â¼€ç±»å‹ï¼ˆæ¥â¼æœ‰å¤šä¸ªå®ç°ç±»ï¼‰ï¼Œéœ€è¦é…åˆæ³¨è§£`@Qualifier`çš„ä½¿â½¤
### @Qualifier("id") æ³¨è§£ï¼ˆSpringæ¡†æ¶æä¾›ï¼‰
- [l] æŒ‰ç…§`id`æ³¨â¼Š

### @Resourceæ³¨è§£ï¼ˆJDKæä¾›ï¼‰
- [l] æ³¨è§£å±æ€§`name`ï¼šé…ç½®ç±»çš„`id`




## Springå¯¹Junitçš„â½€æŒ
- [w] `junit`è¿â¾çš„æ—¶å€™åº•å±‚ä½¿â½¤äº†`Runner`å¯¹è±¡ï¼Œæœ‰â¼€ä¸ªé»˜è®¤ä½¿â½¤çš„`Runner`å¯¹è±¡ã€‚
>Springå¯¹junitçš„â½€æŒï¼Œå…¶å®æ˜¯â¾ƒâ¼°å®ç°äº†â¼€ä¸ªRunnerå¯¹è±¡ï¼ˆæŒ‰ç…§junit runnerçš„è¦æ±‚å®ç°ï¼‰
>Springå¯¹junitçš„â½€æŒçš„ä½“ç°

- [i] å¥½å¤„â¼€ï¼šé…ç½®å®Œä¹‹åï¼Œä¸éœ€è¦æˆ‘ä»¬â¼¿åŠ¨çš„å¯åŠ¨`Spring`
- [i] å¥½å¤„â¼†ï¼šå¯ä»¥åœ¨`junit`æµ‹è¯•ç±»ä¸­ä½¿â½¤`@AutoWired`ç­‰â½…å¼æ³¨â¼Šå¯¹è±¡ï¼Œç›´æ¥å¯¹å…¶è¿›â¾è°ƒâ½¤æµ‹è¯•
### ä½¿â½¤æ­¥éª¤
#### å¼•â¼Šspring-test.jar
```
<dependency>  
    <groupId>org.springframework</groupId>  
    <artifactId>spring-test</artifactId>  
    <version>${spring.version}</version>  
</dependency>
```
#### é…ç½®æµ‹è¯•ç±»
##### ç»“åˆjunit4
```java
@RunWith(SpringJUnit4ClassRunner.class)//junit4ç»“åˆ
class AccountServiceTest {}
```
##### ç»“åˆjunit5
```java
@ExtendWith(SpringExtension.class)//junit5ç»“åˆ
class AccountServiceTest {}
```



### ç¤ºä¾‹ä»£ç 
```java
//ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext("applicationContext.xml");  
//classpathä¼šæ‰¾targetä¸‹é¢çš„classçš„å†…å®¹  
@ContextConfiguration(locations = {"classpath:applicationContext.xml"})  
//@RunWith(SpringJUnit4ClassRunner.class)//junit4ç»“åˆ  
@ExtendWith(SpringExtension.class)//junit5ç»“åˆ  
class AccountServiceTest {  
    @Autowired  
    AccountServiceImpl accountService;  
    //accountService = context.getBean("accountService", AccountServiceImpl.class);  
  
    @Test  
    void findAll() {  
        List<Account> all = accountService.findAll();  
        all.forEach(System.out::println);  
    }  
}
```

### æ€»ç»“
- [b] æµ‹è¯•ç±»ä¸Šæ·»åŠ æ³¨è§£ï¼š`@ContextConfiguration`ã€`@ExtendWith`
    - [i] `@ContextConfiguration`ï¼šå¯¹åº”Springçš„é…ç½®æ–‡ä»¶å…¨è·¯å¾„
    - [i] `@ExtendWith`ï¼šSpringä¸Junit5ç»“åˆ
- [b] æµ‹è¯•çš„ä¸šåŠ¡æ¥å£ï¼Œä½¿ç”¨`@Autowired`è¿›è¡Œæˆå‘˜å˜é‡å¼•ç”¨  