---
tags: note
status: done
priority: 9
time: 2022-05-26 10:15
things:  "[🧊](things:///show?id=JtkDsmtmq6Bd8ZbzKBJTW4)"
---


# AOP的相关概念

## AOP概述

- [p] `AOP`：全称是`Aspect Oriented Programming`。即：⾯向切⾯编程。

它是把我们业务逻辑中的各个部分进⾏隔离，使每个部分独⽴开来，在需要⽤到某个部分的时候，运⽤预编译和运⾏期动态代理技术把增强的代码加⼊到我们的业务逻辑中，组成完整的功能。

- [b] 它是⼀种==编程思想==，⼀种设计理念，是OOP的⼀种延续。运⽤AOP编程思想，可以提⾼代码的可重⽤性，使编码更加简洁，更易于维护。

- [b] 就是把我们程序重复的代码抽取出来，在需要执⾏的时候，使==⽤动态代理==的技术，在不修改源码的基础上，对我们的已有⽅法进⾏增强。

## AOP的基础知识

### AOP优势

运⽤AOP编程思想，具有以下优势：

- [i]  提⾼代码的独⽴性
- [i]  减少重复代码，提⾼开发效率
- [i] 易于维护

### AOP应⽤场景说明

在实际开发中，有很多地⽅都可以看到AOP编程思想的身影。我们第⼀次接触到它的地⽅，就是学习Filter过滤器的时候，过滤器就是AOP思想的具体应⽤场景之⼀。

>实际开发中，有很多具体的需求，都可以借助AOP编程思想来实现。
>例如：记录访问⽇志，统计⽅法执⾏效率，判断⽤户的访问权限等等，这些场景都可以使⽤AOP编程思想。

## Spring中的AOP


### AOP相关术语

#### 业务主线
![](https://cdn.jsdelivr.net/gh/testeru-top/images/spring/202205261455964.png)

>上图就是未采⽤AOP思想设计的程序，当我们红⾊框中圈定的⽅法时，会带来⼤量的重复劳动。
>程序中充斥着⼤量的重复代码，使我们程序的独⽴性很差。

下图中是采⽤了AOP思想设计的程序，它把红框部分的代码抽取出来的同时，运⽤动态代理技术，在运⾏期对需要使⽤的业务逻辑⽅法进⾏增强。
![](https://cdn.jsdelivr.net/gh/testeru-top/images/spring/202205261521055.png)

### AOP术语名词 解释
|名词|解释|
|---|---|
|`Joinpoint`(连接点)||
|`Joinpoint`(连接点)||
|`Joinpoint`(连接点)||
|`Joinpoint`(连接点)||
|`Joinpoint`(连接点)||
|`Joinpoint`(连接点)||
|`Joinpoint`(连接点)||
|`Joinpoint`(连接点)||
|`Joinpoint`(连接点)||



它指的是那些可以⽤于把增强代码加⼊到业务主线中的点，那么由上图中我

们可以看出，这些点指的就是⽅法。在⽅法执⾏的前后通过动态代理技术加

⼊增强的代码。在Spring框架AOP思想的技术实现中，也只⽀持⽅法类型的

连接点。

Pointcut(切⼊

点)

它指的是那些已经把增强代码加⼊到业务主线进来之后的连接点。由上图

中，我们看出表现层 transfer ⽅法就只是连接点，因为判断访问权限的功

能并没有对其增强。

Aspect(切⾯)

它指定是增强的代码所关注的⽅⾯，把这些相关的增强代码定义到⼀个类

中，这个类就是切⾯类。例如，事务切⾯，它⾥⾯定义的⽅法就是和事务相

关的，像开启事务，提交事务，回滚事务等等，不会定义其他与事务⽆关的

⽅法。我们前⾯的案例中 TrasnactionManager 就是⼀个切⾯。

Advice(通知/增

强)

它指的是切⾯类中⽤于提供增强功能的⽅法。并且不同的⽅法增强的时机是

不⼀样的。⽐如，开启事务肯定要在业务⽅法执⾏之前执⾏；提交事务要在

业务⽅法正常执⾏之后执⾏，⽽回滚事务要在业务⽅法执⾏产⽣异常之后执

⾏等等。那么这些就是通知的类型。其分类有：前置通知 后置通知 异常通

知 最终通知 环绕通知。

Target(⽬标对

象)

它指的是代理的⽬标对象。即被代理对象。

Proxy(代理) 它指的是⼀个类被AOP织⼊增强后，产⽣的代理类。即代理对象。

Weaving(织⼊)

它指的是把增强应⽤到⽬标对象来创建新的代理对象的过程。spring采⽤动

态代理织⼊，⽽AspectJ采⽤编译期织⼊和类装载期织⼊。

Introduction(引

介)

它指的是在不修改类代码的前提下, 运⾏期为⽬标对象动态地添加⼀些⽅法

或字段。

## Spring中AOP的代理选择

- [b] 默认情况下，`Spring`会根据被代理对象是否实现接⼝来选择使⽤`JDK`还是`CGLIB`。
- [p] 当被代理对象==没有实现任何接⼝==时，`Spring`会选择`CGLIB`。
- [p] 当被代理对象==实现了接⼝==，`Spring`会选择`JDK`官⽅的代理技术，不过我们可以通过配置的⽅式，让`Spring`强制使⽤`CGLIB`。

## Spring中AOP的配置⽅式

在Spring的AOP配置中，也和IoC配置⼀样，⽀持3类配置⽅式。

##### 使⽤XML配置

##### 使⽤XML+注解组合配置

##### 使⽤纯注解配置