---
tags: note
status: done
priority: 4
time: 2022-05-24 18:38
things:  "[ğŸ§Š](things:///show?id=JtkDsmtmq6Bd8ZbzKBJTW4)"
---



# IOCä¸­Beanæ ‡ç­¾å’Œç®¡ç†å¯¹è±¡ç»†èŠ‚

- Beanæ ‡ç­¾çš„å¯¹è±¡è·å–: getBeanâ½…æ³•

## Daoå±‚Bean

- æ­¥éª¤1ï¼šbeané…ç½®æ–‡ä»¶ä¸­æ·»åŠ daoé…ç½®
```xml
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.Springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.Springframework.org/schema/beans
        https://www.Springframework.org/schema/beans/Spring-beans.xsd">
<!--    idï¼šæ ‡è¯†å•ä¸ª bean å®šä¹‰çš„å­—ç¬¦ä¸²
        classï¼šå®šä¹‰ bean çš„ç±»å‹å¹¶ä½¿ç”¨å®Œå…¨é™å®šçš„ç±»å-->
    <!--    é…ç½®service-->
    <bean id="accountService" class="top.testeru.service.impl.AccountServiceImpl">
        <!-- collaborators and configuration for this bean go here -->
    </bean>
    <!--    é…ç½®dao-->
    <bean id="accountDao" class="top.testeru.dao.impl.AccountDaoImpl">

    </bean>


</beans>
```
- æ­¥éª¤2ï¼šdaoè¿è¡Œ
```java
package top.testeru.dao.impl;

import org.junit.jupiter.api.Test;
import org.Springframework.context.ApplicationContext;
import org.Springframework.context.support.ClassPathXmlApplicationContext;
import top.testeru.dao.AccountDao;
import top.testeru.service.AccountService;
import top.testeru.service.impl.AccountServiceImpl;

import static org.junit.jupiter.api.Assertions.*;

/**
 * @Classname AccountDaoImplTest
 * @Description IOCçš„æµ‹è¯•ç±»
 * @Date 2022/5/23 11:20
 * @Created by top.testeru
 */
class AccountDaoImplTest {

    /**
     * è·å–Springå®¹å™¨ä¸­çš„ serviceå¯¹è±¡
     */
    @Test
    public void iocTest(){
        /**
         * é€šè¿‡Springæ¡†æ¶åŠ è½½XMLé…ç½®â½‚ä»¶
         * è§£æbeans.xmlé…ç½®â½‚ä»¶ æŠŠBeanæ ‡ç­¾ä¸­çš„id ä¸classå±æ€§å€¼, å­˜åˆ°Mapé›†åˆä¸­
         * è¿™ä¸ªMapé›†åˆæ˜¯ç”±Springæ¡†æ¶ç»´æŠ¤çš„, æŠŠè¿™ä¸ªMAPé›†åˆ æˆä¸º Springå®¹å™¨
         */
        //1.åŠ è½½Springçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ å¤šä¸ªé…ç½®æ–‡ä»¶é€—å·éš”å¼€
        //æä¾›ç»™æ„é€ å‡½æ•°çš„ä¸€ä¸ªæˆ–å¤šä¸ªä½ç½®è·¯å¾„ApplicationContextæ˜¯èµ„æºå­—ç¬¦ä¸²ï¼Œå…è®¸å®¹å™¨ä»å„ç§å¤–éƒ¨èµ„æºï¼ˆä¾‹å¦‚æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿã€Java ç­‰ï¼‰åŠ è½½é…ç½®å…ƒæ•°æ®CLASSPATHã€‚
        ApplicationContext context = new ClassPathXmlApplicationContext("beans.xml");
        AccountDao accountDao = (AccountDao)context.getBean("accountDao");
        accountDao.saveAccount();
    }
}
```


### bean-idè·å–å¯¹è±¡
```java
AccountDao accountDao1 = (AccountDao)context.getBean("accountDao");
```
### å­—èŠ‚ç è·å–å¯¹è±¡
- **é¢å‘æ¥å£ç¼–ç¨‹**
```java
AccountDao accountDao2 = context.getBean(AccountDao.class);
```
### â¼€ä¸ªæ¥â¼æœ‰å¤šä¸ªå®ç°ç±»
```java
AccountDao accountDao3 = context.getBean("accountDao", AccountDao.class);
```


ç¤ºä¾‹ä»£ç ï¼š
```java
package top.testeru.dao.impl;

import org.junit.jupiter.api.Test;
import org.Springframework.context.ApplicationContext;
import org.Springframework.context.support.ClassPathXmlApplicationContext;
import top.testeru.dao.AccountDao;
import top.testeru.service.AccountService;
import top.testeru.service.impl.AccountServiceImpl;

import static org.junit.jupiter.api.Assertions.*;

/**
 * @Classname AccountDaoImplTest
 * @Description IOCçš„æµ‹è¯•ç±»
 * @Date 2022/5/23 11:20
 * @Created by top.testeru
 */
class AccountDaoImplTest {

    /**
     * è·å–Springå®¹å™¨ä¸­çš„ serviceå¯¹è±¡
     */
    @Test
    public void iocTest(){
        /**
         * é€šè¿‡Springæ¡†æ¶åŠ è½½XMLé…ç½®â½‚ä»¶
         * è§£æbeans.xmlé…ç½®â½‚ä»¶ æŠŠBeanæ ‡ç­¾ä¸­çš„id ä¸classå±æ€§å€¼, å­˜åˆ°Mapé›†åˆä¸­
         * è¿™ä¸ªMapé›†åˆæ˜¯ç”±Springæ¡†æ¶ç»´æŠ¤çš„, æŠŠè¿™ä¸ªMAPé›†åˆ æˆä¸º Springå®¹å™¨
         */
        //1.åŠ è½½Springçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ å¤šä¸ªé…ç½®æ–‡ä»¶é€—å·éš”å¼€
        //æä¾›ç»™æ„é€ å‡½æ•°çš„ä¸€ä¸ªæˆ–å¤šä¸ªä½ç½®è·¯å¾„ApplicationContextæ˜¯èµ„æºå­—ç¬¦ä¸²ï¼Œå…è®¸å®¹å™¨ä»å„ç§å¤–éƒ¨èµ„æºï¼ˆä¾‹å¦‚æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿã€Java ç­‰ï¼‰åŠ è½½é…ç½®å…ƒæ•°æ®CLASSPATHã€‚
        ApplicationContext context = new ClassPathXmlApplicationContext("beans.xml");
        //æ–¹å¼ä¸€ï¼šæ ¹æ®beançš„idè·å–å¯¹è±¡
        AccountDao accountDao1 = (AccountDao)context.getBean("accountDao");
        System.out.println(accountDao1);
        accountDao1.saveAccount();
        //æ–¹å¼äºŒï¼šæ ¹æ®å­—èŠ‚ç è·å–å¯¹è±¡
        AccountDao accountDao2 = context.getBean(AccountDao.class);
        System.out.println(accountDao2);
        accountDao2.saveAccount();

        //æ–¹å¼ä¸‰ï¼š (â¼€ä¸ªæ¥â¼æœ‰å¤šä¸ªå®ç°ç±»æ—¶)æ ¹æ®å­—èŠ‚ç ä¸beançš„id è¿›â¾ç¡®å®šè·å–æŒ‡å®šBeanå¯¹è±¡
        AccountDao accountDao3 = context.getBean("accountDao", AccountDao.class);
        System.out.println(accountDao3);
        accountDao3.saveAccount();
    }
}
```
![](https://cdn.jsdelivr.net/gh/testeru-top/images/spring/202205231225038.png)

- è·å–åˆ°çš„æ‰€æœ‰å¯¹è±¡éƒ½æ˜¯ä¸€ä¸ª
>å¯¹è±¡çš„åœ°å€éƒ½ä¸€æ ·

## Beanæ ‡ç­¾çš„ä½œâ½¤å’Œå±æ€§
### ä½œâ½¤
- â½¤äºé…ç½®å¯¹è±¡è®© `Spring` æ¥åˆ›å»ºçš„ã€‚
- é»˜è®¤æƒ…å†µä¸‹å®ƒè°ƒâ½¤çš„æ˜¯ç±»ä¸­çš„â½†å‚æ„é€ å‡½æ•°ã€‚å¦‚æœæ²¡æœ‰â½†å‚æ„é€ å‡½æ•°åˆ™ä¸èƒ½åˆ›å»ºæˆåŠŸã€‚
- [b]  `bean` æ ‡ç­¾ï¼šâ½¤äºé…ç½®è®© `Spring` åˆ›å»ºå¯¹è±¡ï¼Œå¹¶ä¸”å­˜â¼Š `ioc` å®¹å™¨ä¹‹ä¸­
### å±æ€§
- [b] `id`ï¼š ç»™å¯¹è±¡åœ¨å®¹å™¨ä¸­æä¾›â¼€ä¸ªå”¯â¼€æ ‡è¯†ã€‚â½¤äºè·å–å¯¹è±¡ã€‚
- [b] `class`ï¼š æŒ‡å®šç±»çš„å…¨é™å®šç±»åã€‚â½¤äºåå°„åˆ›å»ºå¯¹è±¡ã€‚é»˜è®¤æƒ…å†µä¸‹è°ƒâ½¤â½†å‚æ„é€ å‡½æ•°ã€‚
- [b] `init-method`ï¼š æŒ‡å®šç±»ä¸­çš„åˆå§‹åŒ–â½…æ³•åç§°ã€‚
>å¯¹è±¡åœ¨beanå®¹å™¨ä¸­åˆå§‹åŒ–çš„æ—¶å€™è°ƒç”¨çš„æ–¹æ³•
- [b] 
#### åˆå§‹åŒ–å›è°ƒ
- `init-method`ï¼šæŒ‡å®šå…·æœ‰æ— æ•ˆæ— å‚æ•°ç­¾åçš„æ–¹æ³•çš„åç§°
```xml
<!--    é…ç½®dao-->
<bean id="accountDao" class="top.testeru.dao.impl.AccountDaoImpl" init-method="saveAccount">
</bean>
```

```java
class AccountDaoImplTest {

    /**
     * è·å–Springå®¹å™¨ä¸­çš„ serviceå¯¹è±¡
     */
    @Test
    public void iocTest(){
        ApplicationContext context = new ClassPathXmlApplicationContext("beans.xml");
        //æ–¹å¼ä¸‰ï¼š (â¼€ä¸ªæ¥â¼æœ‰å¤šä¸ªå®ç°ç±»æ—¶)æ ¹æ®å­—èŠ‚ç ä¸beançš„id è¿›â¾ç¡®å®šè·å–æŒ‡å®šBeanå¯¹è±¡
        AccountDao accountDao3 = context.getBean("accountDao", AccountDao.class);
    }
}
```

>`bean`æ ‡ç­¾é…ç½®äº†å¯¹åº”çš„`init-method`ï¼Œåœ¨è¯¥å¯¹è±¡åœ¨Springå®¹å™¨ä¸­åˆå§‹åŒ–åˆ›å»ºå®Œæˆåï¼Œå°±ä¼šè‡ªåŠ¨è°ƒç”¨è¿è¡Œ`init`å£°æ˜çš„æ–¹æ³•
![](https://cdn.jsdelivr.net/gh/testeru-top/images/spring/202205231427370.png)
#### é”€æ¯å›è°ƒ
- destroy-methodï¼šå®¹å™¨é”€æ¯æ—¶è°ƒç”¨çš„æ–¹æ³•ï¼Œé”€æ¯æ–¹æ³•
```xml    
<bean id="accountDao" class="top.testeru.dao.impl.AccountDaoImpl" init-method="saveAccount" destroy-method="saveAccount">
```


#### Bean ä½œç”¨åŸŸ
![](https://cdn.jsdelivr.net/gh/testeru-top/images/spring/202205231436416.png)
##### singleton
- [w] ï¼ˆé»˜è®¤ï¼‰å°†å•ä¸ª `bean` å®šä¹‰é™å®šä¸ºæ¯ä¸ª` Spring IoC` å®¹å™¨çš„å•ä¸ªå¯¹è±¡å®ä¾‹ã€‚
- [b] ä¸‹å›¾è¯´æ˜æ‹¿åˆ°çš„3ä¸ªå¯¹è±¡éƒ½æ˜¯åŒä¸€ä¸ªï¼Œå¯¹è±¡çš„hashå€¼ç›¸ç­‰
 ![](https://cdn.jsdelivr.net/gh/testeru-top/images/spring/202205231225038.png)

##### prototype
- [w] å°†å•ä¸ª `bean` å®šä¹‰é™å®šä¸ºä»»æ„æ•°é‡çš„å¯¹è±¡å®ä¾‹ã€‚


- [b] æƒ³è¦æ‹¿åˆ°çš„3ä¸ªå¯¹è±¡ä¸æ˜¯åŒä¸€ä¸ªï¼Œå¯¹è±¡çš„`hash`å€¼ä¸ç›¸ç­‰ï¼Œåˆ™éœ€è¦é…ç½®å¦‚ä¸‹ï¼š
```xml
<bean id="accountDao" class="top.testeru.dao.impl.AccountDaoImpl" scope="prototype"></bean>
```

![](https://cdn.jsdelivr.net/gh/testeru-top/images/spring/202205231454006.png)


# Springçš„ä¾èµ–æ³¨â¼Š(DI)
##  question
>å¯¹åº”ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼ŒSpringå®¹å™¨ä¸­é€šè¿‡beansé…ç½®æ–‡ä»¶ï¼Œæœ‰Daoå¯¹è±¡ï¼Œä½†æ˜¯åœ¨serviceå±‚è°ƒç”¨daoå±‚çš„å¯¹è±¡çš„æ—¶å€™ï¼Œæœ‰æ²¡æœ‰ç”¨åˆ°Springå®¹å™¨ä¸­çš„å¯¹è±¡ï¼Ÿï¼Ÿè‚¯å®šæ˜¯æ²¡æœ‰çš„ï¼Œå¦‚æœç”¨åˆ°ï¼Œåˆ™ä¸ä¼šæŠ¥ç©ºæŒ‡é’ˆå¼‚å¸¸
>Springå®¹å™¨ä¸­çš„Daoå¯¹è±¡å’Œserviceå±‚ä¸­è°ƒç”¨è¯¥å¯¹è±¡æ²¡æœ‰åšå…³è”ï¼Œæ‰€ä»¥ä¼šæœ‰ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦å¯¹åº”çš„ä¾èµ–æ³¨å…¥
![](https://cdn.jsdelivr.net/gh/testeru-top/images/spring/202205231622642.png)

## ä»€ä¹ˆæ˜¯ä¾èµ–æ³¨â¼Š
- ä¾èµ–æ³¨â¼Š(`DI`)ï¼š `Dependency Injection`ã€‚å°±æ˜¯è®©`Spring`æ¡†æ¶ç»™`Bean`å¯¹è±¡çš„å±æ€§è¿›â¾èµ‹å€¼. å®ƒæ˜¯`Spring` æ¡†æ¶æ ¸â¼¼ `ioc` çš„å…·ä½“å®ç°ã€‚
>æˆ‘ä»¬çš„ç¨‹åºåœ¨ç¼–å†™æ—¶ï¼Œ é€šè¿‡æ§åˆ¶åè½¬ï¼ŒæŠŠå¯¹è±¡çš„åˆ›å»ºäº¤ç»™äº† Springï¼Œä½†æ˜¯ä»£ç ä¸­ä¸å¯èƒ½å‡ºç°æ²¡æœ‰ä¾èµ–çš„æƒ…å†µã€‚
> ioc è§£è€¦åªæ˜¯é™ä½ä»–ä»¬çš„ä¾èµ–å…³ç³»ï¼Œä½†ä¸ä¼šæ¶ˆé™¤ã€‚ 
> ä¾‹å¦‚ï¼šæˆ‘ä»¬çš„ä¸šåŠ¡å±‚ä»ä¼šè°ƒâ½¤æŒä¹…å±‚çš„â½…æ³•ã€‚é‚£è¿™ç§ä¸šåŠ¡å±‚å’ŒæŒä¹…å±‚çš„ä¾èµ–å…³ç³»ï¼Œ åœ¨ä½¿â½¤ Spring ä¹‹åï¼Œ å°±è®© Spring æ¥ç»´æŠ¤äº†ã€‚ 

- [p] ç±»ä¸­çš„æˆå‘˜å˜é‡è¿›è¡Œèµ‹å€¼æ“ä½œçš„è¿‡ç¨‹ï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­ä¹Ÿè¦ä½“ç°ï¼Œè¿™ä¸ªä½“ç°å°±å«åšä¾èµ–æ³¨å…¥ã€‚ã€Œ==æŠŠæˆ‘ä»¬å¯¹è±¡ä¸­çš„æˆå‘˜å˜é‡è¿›è¡Œèµ‹å€¼æ“ä½œ==ã€
ç®€å•çš„è¯´ï¼Œä¾èµ–æ³¨â¼Š(`DI`)å°±æ˜¯åç­‰æ¡†æ¶æŠŠæŒä¹…å±‚å¯¹è±¡ä¼ â¼Šä¸šåŠ¡å±‚ï¼Œâ½½ä¸â½¤æˆ‘ä»¬â¾ƒâ¼°å»è·å–ã€‚

### å¥½å¤„
å¯¹åº”çš„æ¥å£å®ç°ç±»å¯¹è±¡ï¼Œä¸åœ¨ä»£ç ä¸­è¿›è¡Œå…³è”ï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œå…³è”ï¼Œé…ç½®æ–‡ä»¶ä¸­å…³è”çš„æ˜¯é‚£ä¸ªå¯¹è±¡å°±ç”¨åˆ°å“ªä¸ªå®ç°ç±»å¯¹è±¡ã€‚è®©ä»£ç æ›´çµæ´»

## æ„é€ å‡½æ•°â½…å¼æ³¨â¼Š
- é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯ä½¿â½¤ç±»ä¸­çš„æ„é€ å‡½æ•°ï¼Œç»™æˆå‘˜å˜é‡èµ‹å€¼ã€‚
- [p] æ³¨æ„ï¼Œèµ‹å€¼çš„æ“ä½œä¸æ˜¯æˆ‘ä»¬â¾ƒâ¼°åšçš„ï¼Œâ½½æ˜¯é€šè¿‡é…ç½®çš„â½…å¼ï¼Œè®© `Spring` æ¡†æ¶æ¥ä¸ºæˆ‘ä»¬æ³¨â¼Šã€‚ 



### æ­¥éª¤1: ç¼–å†™DIServiceImpl
```java
package top.testeru.service.impl;

import top.testeru.service.DIService;

import java.util.Date;


public class DIServiceImpl implements DIService {

    //ä¾èµ–æ³¨â¼Š
    private String name;
    private Integer age;
    private Date birthday;

    public DIServiceImpl() {
    }

    public DIServiceImpl(String name, Integer age, Date birthday) {
        this.name = name;
        this.age = age;
        this.birthday = birthday;
    }

    @Override
    public void getDI() {
        System.out.println("name:" + name);
        System.out.println("age:" + age);
        System.out.println("birthday:" + birthday);
    }
}
```
>ä½¿â½¤æ„é€ å‡½æ•°çš„â½…å¼ï¼Œç»™pojoä¸­çš„å±æ€§ä¼ å€¼
![](https://cdn.jsdelivr.net/gh/testeru-top/images/spring/202205231641365.png)
##### è¦æ±‚
- ç±»ä¸­éœ€è¦æä¾›â¼€ä¸ªå¯¹åº”å‚æ•°åˆ—è¡¨çš„æ„é€ å‡½æ•°ã€‚
### æ­¥éª¤2: ç¼–å†™beans.xml

### æ¶‰åŠçš„æ ‡ç­¾
- constructor-arg
#### å±æ€§

##### index
- [l] æŒ‡å®šå‚æ•°åœ¨æ„é€ å‡½æ•°å‚æ•°åˆ—è¡¨çš„ç´¢å¼•ä½ç½®
##### type
- [l] æŒ‡å®šå‚æ•°åœ¨æ„é€ å‡½æ•°ä¸­çš„æ•°æ®ç±»å‹
##### name
- [l] æŒ‡å®šå‚æ•°åœ¨æ„é€ å‡½æ•°ä¸­çš„åç§° â½¤è¿™ä¸ªæ‰¾ç»™è°èµ‹å€¼

========ä¸Šâ¾¯ä¸‰ä¸ªéƒ½æ˜¯æ‰¾ç»™è°èµ‹å€¼ï¼Œä¸‹â¾¯ä¸¤ä¸ªæŒ‡çš„æ˜¯èµ‹ä»€ä¹ˆå€¼çš„========

##### value
- [l] å®ƒèƒ½èµ‹çš„å€¼æ˜¯åŸºæœ¬æ•°æ®ç±»å‹å’Œ `String` ç±»å‹
##### ref
- [l] å®ƒèƒ½èµ‹çš„å€¼æ˜¯å…¶ä»– `bean` ç±»å‹ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¿…é¡»å¾—æ˜¯åœ¨é…ç½®â½‚ä»¶ä¸­é…ç½®è¿‡çš„ `bean`

### beané…ç½®
####  nameå±æ€§-â€¼ï¸
```xml
<!--åˆ›å»ºâ¼€ä¸ªâ½‡æœŸå¯¹è±¡-->
<bean id="myDate" class="java.util.Date"></bean>

<bean id="diService" class="top.testeru.service.impl.DIServiceImpl">
    <constructor-arg name="age" value="18"></constructor-arg>
    <constructor-arg name="name" value="testeru"></constructor-arg>
    <constructor-arg name="birthday" ref="myDate"></constructor-arg>
</bean>
```
- [b] æ³¨æ„ï¼š`date`é…ç½®çš„`bean`éœ€è¦ç”¨`ref`å¼•ç”¨

####  indexâ½…å¼

```xml
<!--åˆ›å»ºâ¼€ä¸ªâ½‡æœŸå¯¹è±¡-->
<bean id="myDate" class="java.util.Date"></bean>

<bean id="diService" class="top.testeru.service.impl.DIServiceImpl">
    <!--  æ ¹æ®indexâ½…å¼, è¿›â¾æ„é€ â½…æ³•èµ‹å€¼-->
  <constructor-arg index="0" value="testeru_index"></constructor-arg>
  <constructor-arg index="1" value="19"></constructor-arg>
  <constructor-arg index="2" ref="myDate"></constructor-arg>

</bean>
```


#### typeâ½…å¼

```xml
<!--åˆ›å»ºâ¼€ä¸ªâ½‡æœŸå¯¹è±¡-->
<bean id="myDate" class="java.util.Date"></bean>

<bean id="diService" class="top.testeru.service.impl.DIServiceImpl">
    <!--  æ ¹æ®typeâ½…å¼, è¿›â¾æ„é€ â½…æ³•èµ‹å€¼-->
    <constructor-arg type="java.lang.String" value="testeru_str"></constructor-arg>
    <constructor-arg type="java.lang.Integer" value="20"></constructor-arg>
    <constructor-arg type="java.util.Date" ref="myDate"></constructor-arg>
</bean>
```

### æ­¥éª¤3: æµ‹è¯•
```java
package top.testeru.service.impl;

import org.junit.jupiter.api.Test;
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;
import top.testeru.service.DIService;

import static org.junit.jupiter.api.Assertions.*;

/**
 * @Classname: DIServiceImplTest
 * @Description:
 * @Date: 2022/5/23 16:14
 * @Created by top.testeru
 */
class DIServiceImplTest {

    @Test
    void test(){
        ApplicationContext context = new ClassPathXmlApplicationContext("beans.xml");
        DIService diService = context.getBean("diService", DIService.class);
        diService.getDI();

    }
}
```


## setâ½…æ³•â½…å¼æ³¨â¼Š
- [b] é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯åœ¨ç±»ä¸­æä¾›éœ€è¦æ³¨â¼Šæˆå‘˜çš„ `set` â½…æ³•ã€‚å®é™…å¼€å‘ä¸­ï¼Œæ­¤ç§â½…å¼â½¤çš„è¾ƒå¤š
  
### æ­¥éª¤1: ç¼–å†™DIServiceImpl
```java
package top.testeru.service.impl;

import top.testeru.service.DIService;

import java.util.Date;

/**
 * @Classname: DIServiceImpl
 * @Description:
 * @Date: 2022/5/23 15:35
 * @Created by top.testeru
 */
public class DIServiceImpl implements DIService {

    //ä¾èµ–æ³¨â¼Š
    private String name;
    private Integer age;
    private Date birthday;

    public void setName(String name) {
        this.name = name;
    }

    public void setAge(Integer age) {
        this.age = age;
    }

    public void setBirthday(Date birthday) {
        this.birthday = birthday;
    }

    @Override
    public void getDI() {
        System.out.println("name:" + name);
        System.out.println("age:" + age);
        System.out.println("birthday:" + birthday);
    }
}
```
### æ­¥éª¤2: ç¼–å†™beans.xml
- é€šè¿‡é…ç½®â½‚ä»¶ç»™ `bean` ä¸­çš„å±æ€§ä¼ å€¼ï¼šä½¿â½¤ `set` â½…æ³•çš„â½…å¼
### æ¶‰åŠçš„æ ‡ç­¾
- property
#### å±æ€§
##### name
- [l] æ‰¾çš„æ˜¯ç±»ä¸­ `set` â½…æ³•åâ¾¯çš„éƒ¨åˆ†
##### value
- [l] ç»™å±æ€§èµ‹å€¼æ˜¯åŸºæœ¬æ•°æ®ç±»å‹å’Œ `string` ç±»å‹çš„
##### ref
- [l] ç»™å±æ€§èµ‹å€¼æ˜¯å…¶ä»– `bean` ç±»å‹çš„

### beané…ç½®
```xml
<!--åˆ›å»ºâ¼€ä¸ªâ½‡æœŸå¯¹è±¡-->
<bean id="myDate" class="java.util.Date"></bean>

<bean id="diService" class="top.testeru.service.impl.DIServiceImpl">
    <property name="name" value="testeru"></property>
    <property name="age" value="18"></property>
    <property name="birthday" ref="myDate"></property>
</bean>

```


### æ­¥éª¤3: æµ‹è¯•
```java
package top.testeru.service.impl;

import org.junit.jupiter.api.Test;
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;
import top.testeru.service.DIService;

import static org.junit.jupiter.api.Assertions.*;

/**
 * @Classname: DIServiceImplTest
 * @Description:
 * @Date: 2022/5/23 16:14
 * @Created by top.testeru
 */
class DIServiceImplTest {

    @Test
    void test(){
        ApplicationContext context = new ClassPathXmlApplicationContext("beans.xml");
        DIService diService = context.getBean("diService", DIService.class);
        diService.getDI();

    }
}
```
## æ³¨â¼Šé›†åˆå±æ€§
- é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯ç»™ç±»ä¸­çš„é›†åˆæˆå‘˜ä¼ å€¼ï¼Œå®ƒâ½¤çš„ä¹Ÿæ˜¯setâ½…æ³•æ³¨â¼Šçš„â½…å¼ï¼Œåªä¸è¿‡å˜é‡çš„æ•°æ®ç±»å‹éƒ½æ˜¯é›†åˆã€‚
- [u] æˆ‘ä»¬è¿™â¾¥ä»‹ç»æ³¨â¼Šæ•°ç»„ï¼Œ`List`ï¼Œ`Set`ï¼Œ`Map`ï¼Œ`Properties`ã€‚
### æ­¥éª¤1: ç¼–å†™DIService2Impl
```java
package top.testeru.service.impl;

import top.testeru.service.DIService;

import java.util.*;

/**
 * @Classname: DIService2Impl
 * @Description:
 * @Date: 2022/5/23 17:00
 * @Created by top.testeru
 */
public class DIService2Impl implements DIService {
    private String[] myStrs;
    private List<String> myList;
    private Set<String> mySet;
    private Map<String,String> myMap;
    private Properties myProps;


    public void setMyStrs(String[] myStrs) {
        this.myStrs = myStrs;
    }

    public void setMyList(List<String> myList) {
        this.myList = myList;
    }

    public void setMySet(Set<String> mySet) {
        this.mySet = mySet;
    }

    public void setMyMap(Map<String, String> myMap) {
        this.myMap = myMap;
    }

    public void setMyProps(Properties myProps) {
        this.myProps = myProps;
    }

    @Override
    public void getDI() {

        System.out.println("myStrs:"+ Arrays.toString(myStrs));
        System.out.println("myList:"+myList);
        System.out.println("mySet:"+mySet);
        System.out.println("myMap:"+myMap);
        System.out.println("myProps:"+myProps);
    }
}

```

### æ­¥éª¤2: ç¼–å†™beans.xml
### æ¶‰åŠçš„æ ‡ç­¾
- property

- [l] æ³¨â¼Šé›†åˆæ•°æ®, åœ¨æ³¨â¼Šé›†åˆæ•°æ®æ—¶ï¼Œåªè¦ç»“æ„ç›¸åŒï¼Œæ ‡ç­¾å¯ä»¥äº’æ¢
- [k] `List` ç»“æ„çš„ï¼š`array`,`list`,`set`
- [k] `Map` ç»“æ„çš„: `map`,`entry`; `props`,`prop`
#### å±æ€§
##### Listé›†åˆ
åœ¨Listç»“æ„çš„é›†åˆæ•°æ®æ³¨â¼Šæ—¶:
- [l] `array` , `list` , `set` è¿™ä¸‰ä¸ªæ ‡ç­¾é€šâ½¤ï¼Œ
- [l] æ³¨å€¼çš„ ==`value`æ ‡ç­¾==å†…éƒ¨å¯ä»¥ç›´æ¥å†™å€¼ï¼Œä¹Ÿå¯ä»¥ä½¿â½¤ ==`bean`æ ‡ç­¾==é…ç½®â¼€ä¸ªå¯¹è±¡ï¼Œæˆ–è€…â½¤ ==`ref`æ ‡ç­¾==å¼•â½¤â¼€ä¸ªå·²ç»é…åˆçš„`bean`çš„å”¯â¼€æ ‡è¯†ã€‚
##### Mapé›†åˆ
- [l] `map` æ ‡ç­¾ä½¿â½¤ `entry`â¼¦æ ‡ç­¾å®ç°æ•°æ®æ³¨â¼Š
  - [i] `entry` æ ‡ç­¾å¯ä»¥ä½¿â½¤`key`å’Œ`value`å±æ€§æŒ‡å®šå­˜â¼Š`map`ä¸­çš„æ•°æ®ã€‚
  - [i] `entry` æ ‡ç­¾ä½¿â½¤==`value-ref`==å±æ€§æŒ‡å®šå·²ç»é…ç½®å¥½çš„`bean`çš„å¼•â½¤ã€‚
  - [i] `entry` æ ‡ç­¾ä¸­ä¹Ÿå¯ä»¥ä½¿â½¤ `ref` æ ‡ç­¾ï¼Œä½†æ˜¯ä¸èƒ½ä½¿â½¤ `bean` æ ‡ç­¾ã€‚
- [l]  `property` æ ‡ç­¾ä¸èƒ½ä¸­ä¸èƒ½ä½¿â½¤ `ref` æˆ–è€… `bean` æ ‡ç­¾å¼•â½¤å¯¹è±¡

### beané…ç½®
```xml
<bean id="diService2" class="top.testeru.service.impl.DIService2Impl">
    <!--ä¾èµ–æ³¨â¼Š æ•°ç»„-->
    <property name="myStrs">
        <array>
            <value>top</value>
            <value>testeru</value>
            <value>spring</value>
        </array>
    </property>
    <!--ä¾èµ–æ³¨â¼Š listé›†åˆ-->
    <property name="myList">
        <list>
            <value>topList</value>
            <value>testeruList</value>
            <value>springList</value>
            <value>springSet</value>
        </list>
    </property>
    <!--ä¾èµ–æ³¨â¼Š seté›†åˆ-->
    <property name="mySet">
        <set>
            <value>topSet</value>
            <value>testeruSet</value>
            <value>springSet</value>
            <value>springSet</value>
        </set>
    </property>
    <!--ä¾èµ–æ³¨â¼Š mapé›†åˆ-->
    <property name="myMap">
        <map>
            <entry key="001" value="topMap"></entry>
            <entry key="002" value="testeruMap"></entry>
            <entry key="003" value="springMap"></entry>
            <entry key="003" value="springBootMap"></entry>
        </map>
    </property>
    <!--ä¾èµ–æ³¨â¼Š propertiesé›†åˆ-->
    <property name="myProps">
        <props>
            <prop key="001">topMap</prop>
            <prop key="002">testeruMap</prop>
            <prop key="003">springMap</prop>
            <prop key="003">springBootMap</prop>
        </props>
    </property>
</bean>
```
ç»“è®ºï¼š
```
myStrs:[top, testeru, spring]
myList:[topList, testeruList, springList, springSet]
mySet:[topSet, testeruSet, springSet]
myMap:{001=topMap, 002=testeruMap, 003=springBootMap}
myProps:{001=topMap, 002=testeruMap, 003=springBootMap}
```
## é—®é¢˜è§£å†³
- setæ–¹å¼æ³¨å…¥
```java
public class AccountServiceImpl implements AccountService {
    //å­˜åœ¨ä»£ç è€¦åˆçš„é—®é¢˜
    AccountDao accountDao; /*= new AccountDaoImpl();*/

    public void setAccountDao(AccountDao accountDao) {
        this.accountDao = accountDao;
    }

    @Override
    public void saveAccount() {
        //è°ƒç”¨daoå±‚çš„ä¿å­˜è´¦æˆ·æ–¹æ³•
        accountDao.saveAccount();
    }
}
```
- é…ç½®bean.xml
```xml
<!--    é…ç½®dao-->
<bean id="accountDao" class="top.testeru.dao.impl.AccountDaoImpl"></bean>


<!--    é…ç½®service-->
<bean id="accountService" class="top.testeru.service.impl.AccountServiceImpl">
    <property name="accountDao" ref="accountDao"></property>
</bean>

```
- æµ‹è¯•ï¼š

```java
class AccountServiceImplTest {
  public void iocTest() {
   ApplicationContext context = new ClassPathXmlApplicationContext("beans.xml");
   AccountService accountService = context.getBean("accountService", AccountService.class);
   accountService.saveAccount();
  }
}
```