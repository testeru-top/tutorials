---
tags: note
status: done
priority: 1
time: 2022-05-26 15:34
things:  "[ğŸ§Š](things:///show?id=JtkDsmtmq6Bd8ZbzKBJTW4)"
---
## å‡†å¤‡å·¥ä½œ

#### å¯¼å…¥ä¾èµ–
```xml
<dependencies>
<!--AOPæ ¸å¿ƒåŠŸèƒ½ï¼Œä¾‹å¦‚ä»£ç†å·¥å‚ç­‰ç­‰-->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-aop</artifactId>
        <version>${spring.version}</version>
    </dependency>
<!--ç®€å•ç†è§£ï¼Œæ”¯æŒåˆ‡å…¥ç‚¹è¡¨è¾¾å¼ç­‰ç­‰-->
    <dependency>
        <groupId>org.aspectj</groupId>
        <artifactId>aspectjweaver</artifactId>
        <version>1.9.7</version>
    </dependency>
</dependencies>
```
#### ä¸šåŠ¡å±‚ä»£ç 
```java
public interface AccountService {
    /**
     * ä¿å­˜
     */
    void save(Account account);
}
```
- å®ç°ç±»
```java
public class AccountServiceImpl implements AccountService {
    @Override
    public void save(Account account) {
        System.out.println("ä¿å­˜è´¦æˆ·");
    }
}
```
#### Springçš„IoCé…ç½®
```xml
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd">

    <!--    serviceå¯¼å…¥  -->
    <bean id="accountService" class="top.testeru.service.impl.AccountServiceImpl">
    </bean>
    
</beans>
```
#### åˆ‡é¢ä»£ç 
```java
public class LogUtil {
    void getLog(){
        System.out.println("æ‰“å°å½“å‰log");
    }
}
```
## AOP
### Springçš„AOPé…ç½®

#### 1ã€Beanäº¤ç»™Springç®¡ç†
```xml
 <bean class="top.testeru.util.LogUtil" id="logUtil"></bean>
```
#### 2ã€ä½¿â½¤aop:configé…ç½®aop
```xml
<aop:config></aop:config>
```
#### 3ã€ä½¿â½¤aop:aspecté…ç½®åˆ‡â¾¯
```xml
<aop:config>
    <aop:aspect ref="logUtil" id="log">
    </aop:aspect>
</aop:config>
```

#### 4ã€ä½¿â½¤å¯¹åº”çš„æ ‡ç­¾é…ç½®é€šçŸ¥çš„ç±»å‹
- methodï¼šè¦æ‰§è¡Œçš„aopæ–¹æ³•
- pointcutï¼šåœ¨é‚£ä¸ªæ–¹æ³•å‰é¢æ‰§è¡Œ
```xml
<aop:config>
    <aop:aspect ref="logUtil" id="log">
        <aop:before method="getLog" pointcut="execution(public void top.testeru.service.impl.AccountServiceImpl.save())"></aop:before>
    </aop:aspect>
</aop:config>
```

## æµ‹è¯•
```java
class AccountServiceImplTest {
    @Test
    void test(){
        //1.åˆ›å»ºå®¹å™¨
        ApplicationContext ac = new
                ClassPathXmlApplicationContext("applicationContext.xml");
        AccountService accountService = ac.getBean("accountService", AccountService.class);
        accountService.save();
    }
}
```