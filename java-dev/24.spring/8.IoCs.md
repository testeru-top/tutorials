---
tags: summary
status: done
priority: 8
time: 2022-05-25 17:32
things:  "[ğŸ§Š](things:///show?id=JtkDsmtmq6Bd8ZbzKBJTW4)"
---
# IoCæ€»ç»“
## æ¦‚å¿µ
## XML+æ³¨è§£

### jdbcæ•°æ®æº
- [b] é…ç½®æ–‡ä»¶ `src/main/resources/jdbc.properties`
```properties
jdbc.driver=com.mysql.cj.jdbc.Driver  
jdbc.url=jdbc:mysql://110.40.250.165:3307/ssm?characterEncoding=UTF-8&useUnicode=true  
jdbc.username=root  
jdbc.password=luoluo606709
```

- [b] é…ç½®ç±»å¼•ç”¨

```java
package top.testeru.config;  

//â½¤äºæŒ‡å®šä¸æ•°æ®åº“ç›¸å…³é…ç½®çš„é…ç½®â½‚ä»¶
@PropertySource("classpath:jdbc.properties")
public class JdbcConfig {  
  
    @Value("${jdbc.driver}")  
    private String driver;  
    @Value("${jdbc.url}")  
    private String url;  
    @Value("${jdbc.username}")  
    private String username;  
    @Value("${jdbc.password}")  
    private String password;  
  
    @Bean("dataSource")  
    public DruidDataSource getDruidDataSource(){  
        DruidDataSource dataSource = new DruidDataSource();  
        dataSource.setUrl(url);  
        dataSource.setDriverClassName(driver);  
        dataSource.setUsername(username);  
        dataSource.setPassword(password);  
        return dataSource;  
    }
}
```


###  mybatis
#### daoæ¥å£åˆ›å»º
- [p] `dao`å±‚åˆ›å»º`mappe`ræ¥å£
- [p] `resource`ä¸‹åŒåŒ…åè·¯å¾„ä¸‹ç¼–å†™`mapper.xml`æ˜ å°„æ–‡ä»¶
#### serviceå¼•ç”¨dao
```java
//@Component  
@Service  
//@Scope("singleton")  
public class AccountServiceImpl implements AccountService {  
  
    @Autowired  
    private AccountDao accountDao;
}
```
### Springæ‰«æservice
- [i] `Spring`æ‰«æå¯¹åº”çš„`service`åŒ…
```java
@ComponentScan("top.testeru.service")//å¼€å¯Springå®¹å™¨çš„æ³¨è§£æ‰«æ  
public class SpringConfig {  
}
```
### mybatisBean
- [i] `Spring`æ³¨å…¥å¯¹åº”çš„`Mybatis`çš„`bean`

```java
//â½¤äºé…ç½®ä¸Mybatisç›¸å…³çš„é…ç½®  
public class BeanConfig {  
    @Bean  
    public SqlSessionFactoryBean getSqlSessionFactoryBean(  
            @Qualifier("dataSource") DataSource dataSource){  
        SqlSessionFactoryBean factoryBean = new SqlSessionFactoryBean();  
        //é…ç½®ç›¸å…³ä¿¡æ¯(æ•°æ®æº)  
        factoryBean.setDataSource(dataSource);  
        //é…ç½®ç›¸å…³ä¿¡æ¯(pojoåˆ«åæ˜ å°„)  
        factoryBean.setTypeAliasesPackage("top.testeru.pojo");  
        return factoryBean;  
    }  
//    é…ç½®Mapperæ˜ å°„æ‰«æ, æ‰«ææ‰€æœ‰çš„Mapper.xmlâ½‚ä»¶ä¸ â½£æˆdaoæ¥â¼çš„å®ç°ç±»å¯¹è±¡å­˜åˆ°IOCå®¹å™¨ä¸­  
    @Bean  
    public MapperScannerConfigurer getMapperScannerConfigurer(){  
        MapperScannerConfigurer configurer = new MapperScannerConfigurer();  
        configurer.setBasePackage("top.testeru.dao");  
        return configurer;  
    }  
}
```
### Springç»“åˆæ‰€æœ‰é…ç½®
- [i] SpringConfig å£°æ˜ä¸ºä¸»é…ç½®æ–‡ä»¶
- [i] SpringConfig å¯¼å…¥æ‰€æœ‰é…ç½®æ–‡ä»¶

```java
@Configuration//ä½œä¸ºSpringæ¡†æ¶çš„ä¸»é…ç½®â½‚ä»¶
@Import({JdbcConfig.class,BeanConfig.class})//å¯¼â¼Šâ¼¦é…ç½®â½‚ä»¶
public class SpringConfig {
}
```

![](https://cdn.jsdelivr.net/gh/testeru-top/images/spring/202205241618543.png)