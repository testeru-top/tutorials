---
tags: note
status: todo
priority: 1
time: 2022-05-25 18:06
things:  "[ğŸ§Š](things:///show?id=JtkDsmtmq6Bd8ZbzKBJTW4)"
---

# ç”¨ä¾‹çš„å½•åˆ¶ã€å›æ”¾


## SampleTest.java
### æ­¥éª¤
1. æ‰“å¼€app
2. ç‚¹å‡»Echo Boxï¼Œè¿›å…¥è¾“å…¥é¡µé¢
3. åœ¨ Say something new è¾“å…¥æ–‡æœ¬
4. ç‚¹å‡»saveæŒ‰é’®

```java
import io.appium.java_client.MobileElement;
import io.appium.java_client.android.AndroidDriver;
import junit.framework.TestCase;
import org.junit.After;
import org.junit.Before;
import org.junit.Test;
import java.net.MalformedURLException;
import java.net.URL;
import org.openqa.selenium.remote.DesiredCapabilities;

public class SampleTest {

  private AndroidDriver driver;

  @Before
  public void setUp() throws MalformedURLException {
    DesiredCapabilities desiredCapabilities = new DesiredCapabilities();
    desiredCapabilities.setCapability("platformName", "Android");
    desiredCapabilities.setCapability("appium:platformVersion", "12.0.0");
    desiredCapabilities.setCapability("appium:deviceName", "8c5f5f92");
    desiredCapabilities.setCapability("appium:appActivity", ".MainActivity");
    desiredCapabilities.setCapability("appium:appPackage", "io.cloudgrey.the_app");
    desiredCapabilities.setCapability("appium:ensureWebviewsHavePages", true);
    desiredCapabilities.setCapability("appium:nativeWebScreenshot", true);
    desiredCapabilities.setCapability("appium:newCommandTimeout", 0);
    desiredCapabilities.setCapability("appium:connectHardwareKeyboard", true);

    URL remoteUrl = new URL("http://127.0.0.1:4723/wd/hub");

    driver = new AndroidDriver(remoteUrl, desiredCapabilities);
  }

  @Test
  public void sampleTest() {
    MobileElement el1 = (MobileElement) driver.findElementByXPath("//android.view.ViewGroup[@content-desc=\"Echo Box\"]/android.widget.TextView[1]");
    el1.click();
    MobileElement el2 = (MobileElement) driver.findElementByAccessibilityId("messageInput");
    el2.sendKeys("gaigai");
    MobileElement el3 = (MobileElement) driver.findElementByXPath("//android.view.ViewGroup[@content-desc=\"messageSaveBtn\"]/android.widget.TextView");
    el3.click();
    MobileElement el4 = (MobileElement) driver.findElementByXPath("/hierarchy/android.widget.FrameLayout/android.widget.LinearLayout/android.widget.FrameLayout/android.widget.LinearLayout/android.widget.FrameLayout/android.widget.RelativeLayout/android.widget.RelativeLayout/android.widget.LinearLayout/android.widget.FrameLayout/android.view.ViewGroup/android.widget.ImageButton");
    el4.click();
  }

  @After
  public void tearDown() {
    driver.quit();
  }
}
```
### ä¼˜åŒ–
- 1ã€åˆ›å»ºmavené¡¹ç›®
- 2ã€å¯¼å…¥junit5ä¾èµ–
- 3ã€ä»£ç ä¸­æ›¿æ¢æ³¨è§£ä¸ºJUnit5
è¿è¡Œ
- 4ã€æ·»åŠ ç­‰å¾…
- 5ã€æ·»åŠ ç”¨ä¾‹æ–­è¨€
- 6ã€æ·»åŠ å¯åŠ¨å‚æ•°noRest
### note
- [i] appium-javaç‰ˆæœ¬å·
	- 8.0ä»¥åç”¨æ³•æœ‰åŒºåˆ«
- æ·»åŠ éšå¼ç­‰å¾…å’Œ`noReset`å±æ€§å¢å¼ºç”¨ä¾‹ç¨³å®šæ€§

- æ·»åŠ æ–­è¨€

- æ³¨æ„

- selenium ç‰ˆæœ¬å»ºè®® 3.141.0

- appium-python-client ç‰ˆæœ¬å»ºè®® 1.2.0


```
package top.testeru.sample;  
  
import io.appium.java_client.AppiumBy;  
  
import io.appium.java_client.android.AndroidDriver;  
  
import java.net.MalformedURLException;  
import java.net.URL;  
  
import org.junit.jupiter.api.AfterAll;  
import org.junit.jupiter.api.BeforeAll;  
import org.junit.jupiter.api.BeforeEach;  
import org.junit.jupiter.api.Test;  
import org.openqa.selenium.By;  
import org.openqa.selenium.WebElement;  
import org.openqa.selenium.remote.DesiredCapabilities;  
  
import static java.lang.Thread.sleep;  
  
public class SampleTest {  
  
  private static AndroidDriver driver;  
  
  @BeforeAll  
  public static void setUp() throws MalformedURLException {  
    DesiredCapabilities desiredCapabilities = new DesiredCapabilities();  
    desiredCapabilities.setCapability("platformName", "Android");  
    desiredCapabilities.setCapability("appium:platformVersion", "12.0.0");  
    desiredCapabilities.setCapability("appium:deviceName", "8c5f5f92");  
    desiredCapabilities.setCapability("appium:appActivity", ".MainActivity");  
    desiredCapabilities.setCapability("appium:appPackage", "io.cloudgrey.the_app");  
    desiredCapabilities.setCapability("appium:ensureWebviewsHavePages", true);  
    desiredCapabilities.setCapability("appium:nativeWebScreenshot", true);  
    desiredCapabilities.setCapability("appium:newCommandTimeout", 0);  
    desiredCapabilities.setCapability("appium:connectHardwareKeyboard", true);  
  
    URL remoteUrl = new URL("http://127.0.0.1:4723/wd/hub");  
  
    driver = new AndroidDriver(remoteUrl, desiredCapabilities);  
  }  
  
  @Test  
  public void sampleTest() {  
    WebElement el1 = (WebElement) driver.findElement(AppiumBy.xpath(  
            "//android.view.ViewGroup[@content-desc=\"Echo Box\"]/android.widget.TextView[1]"));  
    el1.click();  
    WebElement el2 = (WebElement) driver.findElement(AppiumBy.accessibilityId("messageInput"));  
    el2.sendKeys("gaigai");  
    WebElement el3 = (WebElement) driver.findElement(AppiumBy.xpath("//android.view.ViewGroup[@content-desc=\"messageSaveBtn\"]/android.widget.TextView"));  
    el3.click();  
    WebElement el4 = (WebElement) driver.findElement(AppiumBy.xpath("/hierarchy/android.widget.FrameLayout/android.widget.LinearLayout/android.widget.FrameLayout/android.widget.LinearLayout/android.widget.FrameLayout/android.widget.RelativeLayout/android.widget.RelativeLayout/android.widget.LinearLayout/android.widget.FrameLayout/android.view.ViewGroup/android.widget.ImageButton"));  
    el4.click();  
    try {  
      sleep(5000);  
    } catch (InterruptedException e) {  
      e.printStackTrace();  
    }  
  
  }  
  
  @AfterAll  
  public static void tearDown() {  
    driver.quit();  
  }  
}
```