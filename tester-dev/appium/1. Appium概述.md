---
tags: note,test
status: done
priority: 1
time: 2022-05-27 09:56
things:  "[ğŸ§Š](things:///show?id=JtkDsmtmq6Bd8ZbzKBJTW4)"
---

# æ¦‚è¿°

- ç›®å‰mobileè‡ªåŠ¨åŒ–è§£å†³æ–¹æ¡ˆ
- Appiumä»‹ç»
- Appiumæ¡†æ¶ä»‹ç»
- Appiumç¯å¢ƒå®‰è£…

## ç›®å‰mobileè‡ªåŠ¨åŒ–è§£å†³æ–¹æ¡ˆ

> ç›®å‰å¸‚é¢ä¸Šæœ‰2å¤§æ“ä½œç³»ç»Ÿï¼Œä¸€ä¸ªå°±æ˜¯IOSä¸€ä¸ªå°±æ˜¯å®‰å“ï¼Œå½“ç„¶è¿˜æœ‰æ–°å¢çš„é¸¿è’™ï¼Œå…¶å®é¸¿è’™ä¹Ÿå¯ä»¥å½“ä½œæ˜¯å®‰å“æ‰‹æœºæ¥è¿›è¡Œæµ‹è¯•ï¼›
>
> ä½†æ˜¯é€šç”¨æµ‹è¯•æ¡†æ¶å°±æ¯”è¾ƒå°‘ 
>
> Macacaç¤¾åŒºç”Ÿæ€ç›¸å¯¹ä¸å®Œå–„ï¼Œç»´æŠ¤ä¹Ÿä¸æ´»è·ƒï¼Œç”¨æˆ·é‡ç›¸å¯¹å°‘

| iOS              | Android      |
| ---------------- | ------------ |
| calabash-ios     | calabash-ios |
| Frank            | MonkeyTalk   |
| UIAutomation     | RObotium     |
| iOS-driver       | UiAutomator  |
| KeepItFunctional | selendroid   |
| Macaca           | Macaca       |
| Appium           | Appium       |

## è‡ªåŠ¨åŒ–å·¥å…·é€‰æ‹©

| å·¥å…·åç§°     | è¢«æµ‹ç³»ç»Ÿ | è„šæœ¬è¯­è¨€    | æ˜¯å¦æ”¯æŒH5 | æ˜¯å¦æ”¯æŒè·¨åº”ç”¨ | å·¥å…·ç¨³å®šæ€§ | æ˜¯å¦ä¸ºsdkè‡ªå¸¦ |
| ------------ | -------- | ----------- | ---------- | -------------- | ---------- | ------------- |
| MonkeyRunner | Android  |             | Y | N | ç¨³å®š | Y |
| Monkey | Android  | Java | N | N | ç¨³å®š | Y |
| Uiautomator2 | Android  | Java        | Y          | Y              | ç¨³å®š       | Y             |
| Uiautomation | iOS | å¼ƒç”¨ |            |                |            |               |
| Adb-For-Test | Android  | Java/Python | Y          | Y              | ç¨³å®š       | Y             |
| Appium | Android,iOS | Java/Python/JS/C# | Y | Y | ä¸€èˆ¬ | N |

- [monkeyrunner](https://developer.android.com/studio/test/monkeyrunner?hl=zh-cn) ï¼šå·¥å…·ä¸ [UI/Application Exerciser Monkey](https://developer.android.com/tools/help/monkey?hl=zh-cn)ï¼ˆå³ `monkey` å·¥å…·ï¼‰æ— å…³ã€‚`monkey` å·¥å…·ç›´æ¥åœ¨è®¾å¤‡æˆ–æ¨¡æ‹Ÿå™¨ä¸Šçš„ `adb` shell ä¸­è¿è¡Œï¼Œå¹¶ç”Ÿæˆä¼ªéšæœºç”¨æˆ·å’Œç³»ç»Ÿäº‹ä»¶æµã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œmonkeyrunner å·¥å…·é€šè¿‡ä» API å‘é€ç‰¹å®šå‘½ä»¤å’Œäº‹ä»¶æ¥ä»å·¥ä½œç«™æ§åˆ¶è®¾å¤‡å’Œæ¨¡æ‹Ÿå™¨ã€‚monkeyrunun å·¥å…·ä½¿ç”¨ [Jython](http://www.jython.org/)ï¼Œè¿™æ˜¯ä¸€ç§ä½¿ç”¨ Java ç¼–ç¨‹è¯­è¨€çš„ Python å®ç°ã€‚Jython ä½¿ monkeyrunner API èƒ½ä¸ Android æ¡†æ¶è½»æ¾äº¤äº’ã€‚å€ŸåŠ© Jythonï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ Python è¯­æ³•è®¿é—® API çš„å¸¸é‡ã€ç±»å’Œæ–¹æ³•ã€‚
- Uiautomator2ï¼šæ˜¯ä¸€ä¸ªè‡ªåŠ¨åŒ–æµ‹è¯•å¼€æºå·¥å…·ï¼Œä»…æ”¯æŒandroidå¹³å°çš„è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œå…¶å°è£…äº†è°·æ­Œè‡ªå¸¦çš„*uiautomator2*æµ‹è¯•æ¡†æ¶



- Uiautomationï¼šwindowsçš„uiè‡ªåŠ¨åŒ–



#### é€‰æ‹©æ¡ä»¶

- å•å¹³å°æµ‹è¯•/å¤šå¹³å°æµ‹è¯•ï¼Ÿ
- æ˜¯å¦å¤šè®¾å¤‡åŒæ—¶æµ‹è¯•ï¼Ÿ
- ä¸å±€é™æµ‹è¯•ç¯å¢ƒï¼Œä»»ä½•ç‰ˆæœ¬ã€ä»»ä½•ç¯å¢ƒéƒ½å¯ä»¥æµ‹è¯•ï¼Ÿ
- æœ€æ“…é•¿å¼€å‘è¯­è¨€
- å½“å‰å¸‚é¢æ˜¯å¦æœ‰æ»¡è¶³é¡¹ç›®éœ€æ±‚çš„æµ‹è¯•å·¥å…·ï¼Ÿæ˜¯å¦éœ€äºŒæ¬¡å¼€å‘ï¼Ÿ

# Appium

## åº”ç”¨åˆ’åˆ†

- åŸç”Ÿåº”ç”¨

  - æ˜¯æŒ‡ç”¨androidæˆ–iOSç¼–å†™çš„åº”ç”¨

  - andriod sdkç»„ä»¶å¼€å‘çš„åº”ç”¨

    > å®é™…ä¸Šæ˜¯ä¸€ç§åŸºäºæ™ºèƒ½æ‰‹æœºæœ¬åœ°æ“ä½œç³»ç»Ÿå¦‚Androidã€IOSå’ŒWindows Phoneå¹¶ä¸”ä½¿ç”¨åŸç”Ÿç¨‹åºç¼–å†™è¿è¡Œçš„ç¬¬ä¸‰æ–¹ç§»åŠ¨åº”ç”¨ç¨‹åºã€‚[**å¼€å‘åŸç”ŸAppè½¯ä»¶**](https://www.apicloud.com/)éœ€è¦é’ˆå¯¹ä¸åŒæ™ºèƒ½æ‰‹æœºçš„æ“ä½œç³»ç»Ÿæ¥é€‰æ‹©ä¸åŒçš„Appå¼€å‘è¯­è¨€ï¼Œå¦‚å®‰å“Appæ˜¯Javaå¼€å‘è¯­è¨€ã€IOS APPæ˜¯Objective-Cè¯­è¨€ã€Windows Phoneçš„APPå¼€å‘æ˜¯C##è¯­è¨€ã€‚
    >
    > 1ã€æ¯ä¸€ç§ç§»åŠ¨æ“ä½œç³»ç»Ÿéƒ½éœ€è¦ç‹¬ç«‹çš„å¼€å‘é¡¹ç›®ã€‚
    >
    > 2ã€æ¯ç§å¹³å°éƒ½éœ€è¦ç‹¬ç«‹çš„å¼€å‘è¯­è¨€ã€‚Java(Android), Objective-C(iOS)ä»¥åŠVisual C++(Windows phone)ç­‰ç­‰ã€‚
    >
    > 3ã€éœ€è¦ä½¿ç”¨å„è‡ªçš„è½¯ä»¶å¼€å‘åŒ…ï¼Œå¼€å‘å·¥å…·ä»¥åŠå„è‡ªçš„æ§ä»¶ã€‚
    >
    > èƒ½å¤Ÿä¸ç§»åŠ¨ç¡¬ä»¶è®¾å¤‡çš„åº•å±‚åŠŸèƒ½ï¼Œæ¯”å¦‚ä¸ªäººä¿¡æ¯ï¼Œæ‘„åƒå¤´ä»¥åŠé‡åŠ›åŠ é€Ÿå™¨ç­‰ç­‰ã€‚ 
    >
    > 1ã€ç›´æ¥ä¸‹è½½åˆ°è®¾å¤‡ã€‚
    >
    > 2ã€ä»¥ç‹¬ç«‹çš„åº”ç”¨ç¨‹åºè¿è¡Œ(å¹¶ä¸éœ€è¦æµè§ˆå™¨)ã€‚
    >
    > 3ã€ç”¨æˆ·å¿…é¡»æ‰‹åŠ¨å»ä¸‹è½½å¹¶å®‰è£…è¿™äº›åŸç”ŸAppã€‚
    >
    > 4ã€æœ‰ä¸€äº›å•†åº—ä¸å–åœºæ¥å¸®åŠ©ç”¨æˆ·å¯»æ‰¾ä½ çš„Appï¼Œç›®å‰appå¸‚åœºä¸è®¡å…¶æ•°ã€‚

- ç§»åŠ¨ç½‘é¡µåº”ç”¨

  - æ˜¯æŒ‡ç½‘é¡µåº”ç”¨ï¼Œç±»ä¼¼äºiOSä¸­safariåº”ç”¨æˆ–è€…Chromeåº”ç”¨æˆ–è€…ç±»ä¼¼æµè§ˆå™¨çš„åº”ç”¨ã€‚

- æ··åˆåº”ç”¨

  - æ˜¯æŒ‡ä¸€ç§åŒ…è£¹webviewçš„åº”ç”¨ï¼ŒåŸç”Ÿåº”ç”¨ç½‘é¡µå†…å®¹äº¤äº’æ€§çš„åº”ç”¨ã€‚
  - å¾®ä¿¡å°ç¨‹åºå°±æ˜¯æ··åˆåº”ç”¨ï¼ŒåŸç”Ÿåº”ç”¨æ˜¯å¾®ä¿¡ï¼Œå†…åµŒçš„å°ç¨‹åºæ˜¯webviewçš„åº”ç”¨

## ä»€ä¹ˆæ˜¯Appium

[appiumç®€ä»‹](http://appium.io/docs/en/about-appium/intro/)

- ç§»åŠ¨ç«¯çš„è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶ 
  - å¯ç”¨äºæµ‹è¯•åŸç”Ÿåº”ç”¨ï¼Œç§»åŠ¨ç½‘é¡µåº”ç”¨å’Œæ··åˆåº”ç”¨ï¼Œä¸”æ˜¯è·¨å¹³å°çš„ã€‚

- [p] ç¬¬ä¸‰æ–¹è‡ªåŠ¨åŒ–å·¥å…·
  - åº•å±‚ç”¨åˆ°çš„æ˜¯Selenium WebDriverç›¸å…³çš„åè®®ï¼Œåœ¨è¿™ä¸ªåŸºç¡€ä¸Šæ·»åŠ çš„ç§»åŠ¨ç«¯çš„API
- [p]  appè‡ªåŠ¨åŒ–æµ‹è¯•
- [p] å¼€æºçš„ã€è·¨å¹³å°çš„
  - iosã€Androidã€Windowã€Mac
  - ä½•ä¸ºè·¨å¹³å°ï¼Œæ„æ€æ˜¯å¯ä»¥é’ˆå¯¹ä¸åŒå¹³å°ç”¨ä¸€å¥—apiæ¥ç¼–å†™è„šæœ¬ã€‚
- [p] **Client/Server Architecture**ï¼šc/sæ¶æ„
  - å®¢æˆ·ç«¯é€šè¿‡WebDriver json wireåè®®ä¸æœåŠ¡ç«¯é€šè®¯

- [p] è„šæœ¬å¤šè¯­è¨€æ”¯æŒ
  - Javaã€Pythonã€rubyã€PHPã€JavaScriptã€C#

- [p] ç”Ÿæ€ä¸°å¯Œï¼Œç¤¾åŒºå¼ºå¤§


## AppiumåŸç†

> 1ã€ä¸­é—´æ˜¯Appium Server é¦–å…ˆå¯åŠ¨èµ·æ¥ï¼Œä¼šå ç”¨ä¸€ä¸ªç«¯å£
>
> 2ã€å¼€å§‹å†™æˆ‘ä»¬è‡ªå·±çš„è„šæœ¬ï¼Œæ¯”å¦‚å…ˆå¯åŠ¨æ‰‹æœºappï¼Œå†™å¥½è„šæœ¬åï¼Œæˆ‘ä»¬å¯¹åº”çš„è„šæœ¬ä»£ç è¿è¡Œï¼Œä¼šå‘é€ä¸€ä¸ªè¯·æ±‚ç»™Appium Serverï¼Œå‘Šè¯‰å®ƒå¸®æˆ‘å»æ€ä¹ˆæ“ä½œæ‰‹æœºä¸Šçš„app
>
> 3ã€è¿™ä¸ªæ—¶å€™å¦‚æœå¯¹åº”çš„è„šæœ¬å‚æ•°éƒ½æ˜¯æ­£ç¡®çš„ï¼Œåˆ™ä¼šæŒ‰ç€æˆ‘ä»¬å†™çš„è„šæœ¬æ­¥éª¤ï¼Œæ‰“å¼€appæ“ä½œ



> è¿™é‡Œéœ€è¦æ³¨æ„2ç‚¹ï¼šç¬¬ä¸€å°±æ˜¯æ— è®ºè„šæœ¬è·ŸAppium Serveräº¤äº’å‘é€è¯·æ±‚ï¼Œè¿˜æ˜¯Appium Serverè·Ÿæ‰‹æœºappäº¤äº’å‘é€è¯·æ±‚ï¼Œéƒ½æ˜¯ç”¨çš„httpåè®®çš„è¯·æ±‚
>
> ç¬¬äºŒï¼Œå°±æ˜¯appå¯åŠ¨åï¼ŒAppium Serverä¼šåˆ›å»ºä¸€ä¸ªsessionè¿›è¡Œè„šæœ¬è·Ÿappä¹‹é—´çš„è¯·æ±‚è½¬å‘ï¼Œä¸æ˜¯æ¯æ¬¡éƒ½é‡æ–°å¯åŠ¨
>
> æˆ‘ä»¬å†™çš„è„šæœ¬å°±ç›¸å½“äºAppiumçš„å®¢æˆ·ç«¯
>
> Appiumçš„å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¹‹é—´è¿›è¡Œé€šä¿¡å¿…é¡»åœ¨ä¸€ä¸ªsessionçš„ä¸Šä¸‹æ–‡ä¸­è¿›è¡Œã€‚å®¢æˆ·ç«¯å‘èµ·é€šä¿¡çš„æ—¶å€™ä¼šé¦–å…ˆå‘é€ä¸€ä¸ªå«åšâ€œDesired Capabilitiesâ€çš„JSONå¯¹è±¡ç»™æœåŠ¡ç«¯ã€‚æœåŠ¡ç«¯æ¥æ”¶åˆ°è¯¥æ•°æ®åï¼Œä¼šåˆ›å»ºä¸€ä¸ªsessionå¹¶å°†sessionçš„IDè¿”å›ç»™å®¢æˆ·ç«¯ï¼Œä¹‹åå®¢æˆ·ç«¯ä¼šç”¨è¯¥sessionçš„IDå‘é€åç»­çš„å‘½ä»¤ã€‚



æˆ‘ä»¬åœ¨æ‰‹æœºå¯åŠ¨appçš„æ—¶å€™ä¼šå‘ç°ï¼Œåœ¨æ‰‹æœºä¸Šç¬¬ä¸€æ¬¡ä¼šå®‰è£…ä¸€ä¸ªappiumsettingè¿˜æœ‰ä¸€ä¸ªå°±æ˜¯uiautomator test 

â€‹	å®‰è£…æˆåŠŸåæ‰èƒ½è¿›è¡Œåç»­çš„å¯åŠ¨

#### æ¯”å–»

è„šæœ¬å°±æ˜¯å¤§Boss-CTOï¼ŒAppium Serverå°±æ˜¯æ€»ç›‘ï¼Œæœ‰ä¸€ä¸ªå¤§å®¢æˆ·éœ€è¦ç°åœºè§£å†³é—®é¢˜çš„éœ€æ±‚ï¼Œè¿™ä¸ªæ—¶å€™CTOã€Œè„šæœ¬ã€ç»™æ€»ç›‘ã€ŒAppium Serverã€å‘æ¶ˆæ¯/æ‰“ç”µè¯ï¼ŒæŠŠå®¢æˆ·åŸºæœ¬æƒ…å†µè¯´äº†ä¸€ä¸‹ã€‚

ç„¶åæ€»ç›‘ã€ŒAppium Serverã€{æ€»ç›‘ä¹Ÿä¸çŸ¥é“é‡Œé¢å…·ä½“çš„ä¸šåŠ¡ä»£ç } å°±ç«‹å³æ‰¾äº†é¡¹ç›®ç»ç†ã€Œwebdriverã€ï¼Œç»™é¡¹ç›®ç»ç†ã€Œwebdriverã€è¯´è¿™ä¸ªé¡¹ç›®ä»¥åå°±æ˜¯ä½ è´Ÿè´£ï¼Œèµ¶ç´§å»å®¢æˆ·ç°åœºï¼Œ

é¡¹ç›®ç»ç†ã€Œwebdriverã€å°±å¸¦äººå»äº†å®¢æˆ·ç°åœºï¼Œå®‰æ’æ‰‹ä¸‹çš„äººå¹²æ´»ï¼Œè§£å†³å®¢æˆ·éœ€æ±‚ã€‚



åœ¨åšè¿™ä¸ªé¡¹ç›®æœŸé—´å°±éœ€è¦é¡¹ç›®ç»ç†ã€Œwebdriverã€ç»™å…¬å¸åŒæ­¥è¿™ä¸ªéœ€æ±‚è¿›åº¦ã€å®¢æˆ·åé¦ˆè¿™äº›é—®é¢˜ï¼Œé¡¹ç›®ç»ç†ã€Œwebdriverã€åé¦ˆç»™æ€»ç›‘ã€ŒAppium Serverã€ï¼Œæ€»ç›‘ã€ŒAppium Serverã€åé¦ˆç»™CTOã€Œè„šæœ¬ã€ï¼Œä¸èƒ½è¶Šçº§ä¸ŠæŠ¥ï¼Œæœ€åCTOã€Œè„šæœ¬ã€çŸ¥é“ç»“æœã€‚



```plantuml
@startuml
left to right direction
package CTO {
  actor è„šæœ¬ 
}
package æ€»ç›‘{
  usecase "Appium Module" 

}
package é¡¹ç›®ç»ç† {
  usecase "app" 

}
CTO --> æ€»ç›‘
æ€»ç›‘ --> CTO
æ€»ç›‘ --> é¡¹ç›®ç»ç†
é¡¹ç›®ç»ç† --> æ€»ç›‘
@enduml
```





### Appiumé€šä¿¡åŸç†

>![](https://cdn.jsdelivr.net/gh/testeru-top/images/tester/202205251122783.png)

Clientç«¯å‘é€è‡ªåŠ¨åŒ–æŒ‡ä»¤ç»™Appium **server**ï¼ŒAppium Serveræ¥æ”¶åˆ°clientå‘é€çš„æŒ‡ä»¤åï¼Œè½¬æ¢ä¸ºç§»åŠ¨ç«¯èƒ½å¤Ÿè¯†åˆ«çš„æŒ‡ä»¤ï¼Œç„¶åå‘é€ç»™ç§»åŠ¨ç«¯è®¾å¤‡ï¼Œå¹¶å¯¹ç§»åŠ¨ç«¯è®¾å¤‡è¿›è¡Œæ“ä½œã€‚

### Appium Server

serveré‡Œé¢ä¸åªæœ‰webDriverã€Œå®‰å“driverã€ iOSdriverã€è¿˜æœ‰å„ç§å·¥ä½œå¼•æ“

>å¯¹åº”githubä¸Šæœ‰å¾ˆå¤šdriverï¼Œappiumå°±ç›¸å½“äºä¸€ä¸ªé›†è£…ç®±ï¼ŒæŠŠgithubè¿™äº›driverå…¨éƒ¨éƒ½é›†æˆè¿‡æ¥ã€‚æ‰€ä»¥åœ¨æˆ‘ä»¬å†™è„šæœ¬çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±éœ€è¦å‘Šè¯‰appiumå½“å‰æˆ‘è¦ç”¨çš„æ˜¯ä»€ä¹ˆserver
>å°±å¥½æ¯”æˆ‘ä»¬æ€»ç›‘æ‰‹ä¸‹æœ‰androidå¼€å‘ï¼Œæœ‰iOSå¼€å‘ã€æœ‰æœåŠ¡ç«¯å¼€å‘ï¼Œé‚£åˆ°åº•å®¢æˆ·éœ€æ±‚æ˜¯éœ€è¦ä»€ä¹ˆå‘¢ï¼Œåœ¨CTOç»™æ€»ç›‘è¯´å®¢æˆ·éœ€æ±‚çš„æ—¶å€™å°±è¦è¯´æ˜ï¼Œæ˜¯è¦åšå“ªä¸€ç«¯çš„å¼€å‘éœ€æ±‚ã€Œè®¾å¤‡æ˜¯iOSè¿˜æ˜¯å®‰å“ã€ï¼Œæ˜¯ç”¨ä»€ä¹ˆè¯­è¨€å»å¼€å‘ï¼Œæœ‰Javaã€pythonã€Goã€JSç­‰ç­‰ã€Œappæ˜¯äº¬ä¸œè¿˜æ˜¯æ·˜å®ã€
>å°±æ˜¯æˆ‘ä»¬åœ¨å†™è„šæœ¬çš„æ—¶å€™ï¼Œéœ€ç”¨å£°æ˜å¯¹åº”çš„è®¾å¤‡æ˜¯iOSçš„è¿˜æ˜¯Androidçš„è¿˜æ˜¯Macçš„ï¼Œå¯¹åº”çš„è¢«æµ‹è¯•çš„appæ˜¯æ·˜å®è¿˜æ˜¯äº¬ä¸œ

### Appiumå·¥ä½œå¼•æ“

> ä¸åŒçš„ç³»ç»Ÿå¯¹åº”çš„å¼•æ“æ˜¯ä¸åŒçš„
>
> è¿™äº›éƒ½æ”¾åœ¨äº†appiumé‡Œé¢ï¼Œè„šæœ¬é…ç½®å¯¹åº”çš„driverï¼Œ

| Platform | Driver                                                       | Platform Versions | Appium Version |
| -------- | ------------------------------------------------------------ | ----------------- | -------------- |
| iOS      | [XCUITest](http://appium.io/docs/en/drivers/ios-xcuitest/)ã€Œæ¨èã€ | iOS 9.3+          | Appium 1.6+    |
|          | [UIAutomation](http://appium.io/docs/en/drivers/ios-uiautomation/)ã€Œå¼ƒç”¨ã€ | iOS 9.3-          | All            |
| Android  | [UiAutomator](http://appium.io/docs/en/drivers/android-uiautomator/index.html#TODO) | All               | Appium 1.14+   |
|          | [UiAutomator2](http://appium.io/docs/en/drivers/android-uiautomator2/)ã€Œæ¨èã€ | Android5.0+       | Appium 1.6+    |
|          | [Espresso](http://appium.io/docs/en/drivers/android-espresso/) |                   | Appium 1.9+    |
| Mac      | [appium-mac-driver](https://github.com/appium/appium-mac-driver) | Mac OS X 10.7     | Appium 1.6.4+  |
| Windows  | [windows](http://appium.io/docs/en/drivers/windows/)         | Windows 10        | Appium 1.6+    |

