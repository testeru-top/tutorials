---
tags: note
status: done
priority: 1
time: 2022-05-25 18:05
things:  "[ğŸ§Š](things:///show?id=JtkDsmtmq6Bd8ZbzKBJTW4)"
---

# å®¢æˆ·ç«¯ç”¨ä¾‹å½•åˆ¶

è‡ªåŠ¨åŒ–å‰æä¾èµ–

æˆ‘ä»¬åœ¨è¿›è¡Œ andorid è‡ªåŠ¨åŒ–ä¹‹å‰éœ€è¦æå‰å‡†å¤‡å¥½ä¸€äº›ç¯å¢ƒã€‚

- å‡†å¤‡è®¾å¤‡ï¼š
  - é¦–å…ˆæˆ‘ä»¬åœ¨è¿›è¡Œ android è‡ªåŠ¨åŒ–ä¹‹å‰æ˜¯éœ€è¦ä¸€å°å®‰å“è®¾å¤‡çš„ï¼Œå¯ä»¥æ˜¯çœŸæœºæˆ–è€…æ˜¯ä¸€å°æ¨¡æ‹Ÿå™¨
  - éœ€è¦è·å–è¿™äº›è®¾å¤‡çš„ç‰ˆæœ¬å·ï¼Œå†™è„šæœ¬çš„æ—¶å€™ï¼Œéœ€è¦é…ç½®è¿™ä¸ªä¿¡æ¯
- å®‰è£…åº”ç”¨ï¼šå®‰è£…è¢«æµ‹åº”ç”¨



è¿™å…¶ä¸­æ¶‰åŠåˆ°çš„è¿æ¥è®¾å¤‡çš„æ“ä½œæ˜¯éœ€è¦å¦å¤–çš„å·¥å…·è¾…åŠ©çš„ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çš„å°±æ˜¯adbè¿æ¥å·¥å…·ã€‚åç»­æˆ‘ä»¬ä¼šå‘Šè¯‰å¤§å®¶adbçš„å…·ä½“æ“ä½œä»¥åŠè¿æ¥è®¾å¤‡çš„æ­¥éª¤ã€‚

åœ¨è‡ªåŠ¨åŒ–æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„è®¾å¤‡çš†å¯ä»¥æ˜¯çœŸæœºä¹Ÿå¯ä»¥æ˜¯æ¨¡æ‹Ÿå™¨ã€‚

è¿æ¥çœŸæœºéœ€è¦æå‰å¼€é€šæ‰‹æœºçš„rootæƒé™ï¼Œä¸€èˆ¬æ˜¯è®¾ç½®é‡Œçš„å¼€å‘è€…é€‰é¡¹éœ€è¦å¼€å¯

æ¨¡æ‹Ÿå™¨å¯ä¾›é€‰æ‹©çš„æ¯”è¾ƒå¤šï¼Œæœ‰ç½‘æ˜“çš„MUMUï¼Œgenimotionæˆ–è€… sdk è‡ªå¸¦çš„æ¨¡æ‹Ÿå™¨ã€‚

appium Desktop æ˜¯å¯ä»¥è¯´æ˜¯ appium ç•Œé¢åŒ–çš„ä¸€ä¸ªå·¥å…·ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å®¹æ˜“çš„ä½¿ç”¨ appium æ¥è¿›è¡Œè‡ªåŠ¨åŒ–çš„å®ç°ã€‚

 ä¸»è¦åŠŸèƒ½

desktopæœ¬èº«å…·å¤‡å¾ˆå¤šåŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨desktopæ¥å®ŒæˆUIåˆ†æã€ç”¨ä¾‹çš„å½•åˆ¶ã€å…ƒç´ æŸ¥æ‰¾æµ‹è¯•ã€è¿æ¥å·²ç»æœ‰çš„sessionä»¥åŠäº‘æµ‹è¯•ã€‚

è¿™äº›æˆ‘ä»¬ä¼šåœ¨åç»­çš„å‡ èŠ‚é€ä¸ªä»‹ç»

 ç”¨ä¾‹å½•åˆ¶

desktop æœ¬èº«å…·å¤‡çš„ä¸€ä¸ªåŠŸèƒ½æ˜¯å½•åˆ¶ç”¨ä¾‹ï¼Œappium desktop æ”¯æŒå°†ç”¨ä¾‹è½¬æ¢ä¸ºä»£ç ï¼Œé€šè¿‡ç”¨ä¾‹çš„å½•åˆ¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥è·å–è¿™æ®µç”¨ä¾‹çš„ä»£ç ï¼Œåç»­è¿›è¡Œä¼˜åŒ–å°±å¯ä»¥å®Œæˆä¸€æ®µè‡ªåŠ¨åŒ–ä»£ç çš„ç¼–å†™

### apk
[the-app](https://github.com/cloudgrey-io/the-app/releases)
### æ­¥éª¤
1. æ‰“å¼€app
2. ç‚¹å‡»Echo Boxï¼Œè¿›å…¥è¾“å…¥é¡µé¢
3. åœ¨ Say something new è¾“å…¥æ–‡æœ¬
4. ç‚¹å‡»saveæŒ‰é’®


## Appium Inspctor åŠŸèƒ½ä»‹ç»
- UI åˆ†æ
- å½•åˆ¶ç”¨ä¾‹
- å…ƒç´ æŸ¥æ‰¾æµ‹è¯•
- Attcah å·²æœ‰çš„ session
- äº‘æµ‹è¯•


# Appium Desktopä½¿ç”¨
## 1) æ‰“å¼€desktopè½¯ä»¶
## 2ï¼‰ç‚¹å‡»Start Server
è¿›å…¥appium serverçš„æ—¥å¿—é¡µé¢
## 3ï¼‰æ‰“å¼€Appium Inspctor 

- 1.19ç‰ˆæœ¬ä»¥ä¸‹ï¼Œç‚¹å‡»æ”¾å¤§é•œæŒ‰é’®
  - å³ä¸Šè§’ç¬¬ä¸€ä¸ªæ”¾å¤§é•œæŒ‰é’®ï¼Œè¿›å…¥clienté…ç½®é¡µé¢ï¼Œå³ `Appium Inspctor` 

- 1.20ç‰ˆæœ¬ä»¥ä¸Šï¼Œæ‰“å¼€Appium Inspctor

## 4ï¼‰ æ‰‹æœºè¿æ¥pcç«¯

### Androidæ‰‹æœºadbå‘½ä»¤éªŒè¯

#### æŸ¥çœ‹å½“å‰pcç«¯è¿æ¥ä¸Šçš„è®¾å¤‡
```
adb devices
```
##### è®¾å¤‡çŠ¶æ€
- `device`
	- è®¾å¤‡è¿æ¥æ­£å¸¸
- `offline`
	- è®¾å¤‡æ— å“åº”
- `unknown`
	- è®¾å¤‡æœªè¿æ¥
### IOSæ‰‹æœºideviceå‘½ä»¤éªŒè¯

## 5ï¼‰é€‰æ‹©  Automatic Server
>Appium Inspctoré¡µé¢çš„  æ¨¡å—1 é€‰æ‹©  Automatic Server

## 6ï¼‰ç¼–å†™ Capabilities
### Capabilities
```
{
	"platformName": "Android",
	"platformVersion": "12",
	"deviceName": "8c5f5f92",
	"automationName": "UiAutomator2",
	"appActivity": ".MainActivity",
	"appPackage": "io.cloudgrey.the_app"
}
```
- TheApp-v1.10.0.apk
##### platformName
- æ‰‹æœºç³»ç»Ÿ
###### Android
- HarmonyOS
###### IOS
##### platformVersion
- æ‰‹æœºç³»ç»Ÿçš„ç‰ˆæœ¬å·
###### Android
- `HarmonyOS`

- æŸ¥çœ‹å®‰å“ç‰ˆæœ¬
```
adb shell getprop ro.build.version.release
```
###### IOS
##### deviceName
- è®¾å¤‡id

- æŸ¥çœ‹è®¾å¤‡ID
```
adb devices
```
#####  automationName
- ä½¿ç”¨çš„è‡ªåŠ¨åŒ–å¼•æ“
###### Android
- UiAutomator1
- UiAutomator2
###### IOS
- XCUITest
##### appPackage
- è¦å¯åŠ¨çš„app
##### appActivity
- è¦å¯åŠ¨çš„appçš„é¦–é¡µé¢
### appçš„åŒ…å
adbæŸ¥çœ‹appçš„åŒ…å
```
adb shell pm list packages -3 | grep io
```
### appé¦–é¡µçš„activity
 monkeyæŸ¥çœ‹appå¯åŠ¨é¡µé¢
```
adb shell monkey -p io.cloudgrey.the_app -vvv 1
```
## 7ï¼‰å¯åŠ¨
- å¯åŠ¨ç¼–å†™çš„capabilites
- ç‚¹å‡»Start Session
## 8ï¼‰é¦–æ¬¡éœ€æ‰‹æœºç«¯å®‰è£…
#### Android
- å®‰è£…AppiumSettings
- å®‰è£…UiAutomator2 server
- å®‰è£…UiAutomator2 server test

![](https://cdn.jsdelivr.net/gh/testeru-top/images/tester/202205251857972.png)

#### IOS
## 9ï¼‰ä¸šåŠ¡æ“ä½œå½•åˆ¶
- åœ¨Appium Inspctoré¡µé¢è¿›è¡Œå¯¹æ‰‹æœºé¡µé¢çš„æ“ä½œ

##### æ­¥éª¤

1. æ‰“å¼€app
2. ç‚¹å‡»Echo Boxï¼Œè¿›å…¥è¾“å…¥é¡µé¢
3. åœ¨ Say something new è¾“å…¥æ–‡æœ¬
4. ç‚¹å‡»saveæŒ‰é’®



# Appiumé¡µé¢ä»‹ç»

## Appium Server å¯åŠ¨é¡µé¢

#### Simple

- é»˜è®¤é…ç½®
- ç›‘å¬æœ¬æœº4723ç«¯å£

#### Advanced

- é«˜çº§è®¾ç½®
- è‡ªå®šä¹‰serverç«¯é…ç½®ï¼Œé…ç½®å®Œåsave Presets

#### Presets

- ä¿®æ”¹advancedçš„é…ç½®é¡¹çš„ä¿å­˜ï¼Œç±»ä¼¼å¤šä¸ªç¯å¢ƒé…ç½®æ¦‚å¿µ
- å¯ä»¥åˆ é™¤ï¼Œåˆ é™¤åé‡å¯æ˜¾ç¤ºé»˜è®¤é…ç½®

## Appium Server Starté¡µé¢
æ§åˆ¶å°æ˜¾ç¤ºè¿è¡Œçš„è„šæœ¬ä¸­çš„æ—¥å¿—ä¿¡æ¯
### å³ä¸Šè§’æŒ‰é’®
å³ä¸Šè§’3 ä¸ªæŒ‰é’®
####  ğŸ”  
>ç¬¬ä¸€ä¸ª  ğŸ”  æœç´¢æŒ‰é’®

`Start Inspector Session`
- å¼€å¯Appium Inspctor 
- inspector ä¼šæ–°å¼€ä¸€ä¸ª Session
####  â¬  
>ç¬¬äºŒä¸ª  â¬   ä¸‹è½½æŒ‰é’®

`Get Raws Logs`
- ä¸‹è½½å½“å‰æ§åˆ¶å°è¾“å‡ºçš„ log ä¿¡æ¯
####  â¸ï¸  
>ç¬¬ä¸‰ä¸ª  â¸ï¸  æš‚åœæŒ‰é’®

`Stop Server`
- å…³é—­å½“å‰çª—å£çš„ Appium server

## Appium Inspctoré¡µé¢
### æ‰“å¼€æ–¹å¼

#### 1.19ç‰ˆæœ¬ä»¥ä¸‹

- 1ã€ Appium Serveré¡µé¢çš„  ğŸ”   æœç´¢æŒ‰é’®
- 2ã€ å·¦ä¸Šè§’é€‰æ‹© New Session Window...
#### 1.20ç‰ˆæœ¬ä»¥ä¸Š

ç›´æ¥æ‰“å¼€Appium Inspctor

### é…ç½®é¡µé¢ä»‹ç»
æ–°ç‰ˆæœ¬ï¼š
![](https://cdn.jsdelivr.net/gh/testeru-top/images/tester/202205251722383.png)
æ—§ç‰ˆæœ¬ï¼š
![](https://cdn.jsdelivr.net/gh/testeru-top/images/tester/202205251724793.png)
#### æ¨¡å—1
>æœåŠ¡çš„è®¾ç½®

##### Automatic Server
- è‡ªåŠ¨æœåŠ¡å™¨
- å½“å‰è¿è¡Œçš„` Appium Desktop`æœåŠ¡å™¨ ==http://localhost:4723==

##### Custom Server
- å®šåˆ¶æœåŠ¡å™¨
- è¿æ¥è¿œç«¯çš„`appium`æœåŠ¡çš„æ—¶å€™å¯ä»¥åœ¨è¯¥å¤„é…ç½®
- è¾“å…¥æ¡†å†…æ˜¾ç¤ºé»˜è®¤å€¼
##### Select Cloud Providers
- é€‰æ‹©äº‘æä¾›å•†
#### æ¨¡å—2
##### Advanced Settings
é«˜çº§è®¾ç½®
##### Allow Unauthorized Certificates
å…è®¸æœªç»æˆæƒçš„è¯ä¹¦
##### Use Proxy
ä½¿ç”¨ä»£ç†æœåŠ¡å™¨
>åˆå­¦è€…ä¸éœ€è¦è¿›è¡Œè¯¥è®¾ç½®
#### æ¨¡å—3
##### Desired Capabilities
Desired Capabilitieså‚æ•°
##### Saved Capability Sets 
- å·²ä¿å­˜çš„Desired Capabilities
- å¯æŸ¥çœ‹ã€ä¿®æ”¹
##### Attach to Sessionâ€¦
é™„åŠ åˆ°ä¼šè¯â€¦


## å®šä½æ§ä»¶é¡µé¢ä»‹ç»

![](https://cdn.jsdelivr.net/gh/testeru-top/images/tester/202205251802059.png)
#### æ¨¡å—1
æ‰‹æœºå½“å‰ç•Œé¢æ˜¾ç¤º
#### æ¨¡å—2
æ“ä½œæ 

##### Select Element
é€‰æ‹© æ¨¡å—1 ç•Œé¢çš„å…ƒç´ 

##### Swipe By Coordinates
- åœ¨æ¨¡å—1 ç•Œé¢ä½¿ç”¨é¼ æ ‡å·¦é”®é€‰æ‹©æ»‘åŠ¨çš„èµ·å§‹å’Œç»“æŸä½ç½®
- é€‰æ‹©å®Œåé¡µé¢loadingåŠ è½½

##### Tap By Coordinates
ç‚¹å‡» æ¨¡å—1 ç•Œé¢çš„åæ ‡å®šä½çš„å…ƒç´ 
å®é™…ç‚¹å‡»çš„æ˜¯åæ ‡ç‚¹

##### Back
æ¨¡æ‹Ÿæ‰‹æœºçš„è¿”å›é”®

##### Refresh Source & Screenshot
- åˆ·æ–°æ‰‹æœºé¡µé¢
- é‡æ–°è·å–æ‰‹æœºå½“å‰ç•Œé¢å¸ƒå±€

##### Start Recording

- å½•åˆ¶æ“ä½œ
- é€‰ä¸­åå¯¹åº”åœ¨ Appium Inspctoré¡µé¢ å¯¹æ‰‹æœºç•Œé¢è¿›è¡Œçš„æ‰€æœ‰æ“ä½œéƒ½å°†è¢«å½•åˆ¶æˆä»£ç è„šæœ¬

![](https://cdn.jsdelivr.net/gh/testeru-top/images/tester/202205251802936.png)

- å½•åˆ¶æ“ä½œé¡µé¢å¯ä»¥é€‰æ‹©ç”Ÿæˆä»£ç è„šæœ¬çš„è¯­è¨€

###### Show/Hide Boilerplate Code
- æ˜¾ç¤º/éšè—æ ·æ¿ä»£ç 
- é€‰æ‹©åå˜æˆä¸€ä¸ªå¾ˆè§„èŒƒçš„æµ‹è¯•è„šæœ¬ä»£ç 

###### Copy code to clipboard
- å°†ä»£ç å¤åˆ¶åˆ°å‰ªè´´æ¿
- ç­‰åŒ ctrl +c

###### Clear Actions
- æ¸…é™¤æ“ä½œ
- ç‚¹å‡»åæ²¡æœ‰å½•åˆ¶çš„ä»£ç å†…å®¹

##### Search for element
- å…ƒç´ å®šä½è¡¨è¾¾å¼æ ¡éªŒ

![](https://cdn.jsdelivr.net/gh/testeru-top/images/tester/202205251803311.png)


- appå…ƒç´ å®šä½æ–¹å¼é€‰æ‹©
- å¡«å†™å¯¹åº”å®šä½è¡¨è¾¾å¼
- ç‚¹å‡»Searchå³è¿›è¡Œå…ƒç´ å®šä½

##### Copy XML Source to Clipboard
- å¤åˆ¶å½“å‰æ‰‹æœºç•Œé¢çš„XMLæ ‘

##### Quit Session & Close Inspector
- æ¨å‡ºå½“å‰session
- å…³é—­å½“å‰ç•Œé¢é€€å‡ºåˆ° Appium Inspctor çš„é…ç½®é¡µé¢
#### æ¨¡å—3
- æ‰‹æœºç•Œé¢çš„XMLæ ‘
- æ‰‹æœºç•Œé¢ä¸Šçš„å„ä¸ªæ§ä»¶å±‚æ¬¡
- é€‰æ‹©å…·ä½“æ ‡ç­¾åˆ™åœ¨æ¨¡å—1 åŠ æ·±æ˜¾ç¤ºå¯¹åº”å…ƒç´ åŒºåŸŸ
#### æ¨¡å—4
- å…ƒç´ å±æ€§
- æ˜¾ç¤ºé€‰ä¸­æ§ä»¶çš„æ‰€æœ‰å±æ€§ã€å¯¹åº”å€¼åŠæ§ä»¶çš„æ“ä½œ
	- é€šè¿‡æ¨¡å—3 / å…ƒç´ æŸ¥æ‰¾å®šä½åˆ°å…·ä½“æ§ä»¶å¹¶é€‰ä¸­
##### åŒ…å«

![](https://cdn.jsdelivr.net/gh/testeru-top/images/tester/202205251804078.png)

###### æ¨¡å—1
- ==tap==
	- ç‚¹å‡»é€‰ä¸­çš„å…ƒç´ 
- ==Send Keys==
	- é€‰ä¸­çš„å…ƒç´ è¿›è¡Œæ–‡æœ¬è¾“å…¥
	- é€‰ä¸­çš„å…ƒç´ å¿…é¡»æ˜¯è¾“å…¥æ¡†ï¼Œå¦åˆ™è¾“å…¥å†…å®¹åæŠ¥é”™
		- Call to 'sendKeys' failed
- ==Clear==

	- æ¸…ç©ºè¾“å…¥æ¡†çš„å€¼
	- é€‰ä¸­çš„å…ƒç´ å¿…é¡»æ˜¯è¾“å…¥æ¡†ï¼Œå¦åˆ™æ¸…ç©ºæŠ¥é”™
		- Call to 'clear' failed

- ==Copy Attributes to Clipboard==
	- å°†å±æ€§å¤åˆ¶åˆ°å‰ªè´´æ¿
		- æ¨¡å—3å†…çš„æ‰€æœ‰å±æ€§å¤åˆ¶å‡ºæ¥
###### æ¨¡å—2
- ==Find By==
	- é€‰ä¸­å…ƒç´ çš„å®šä½æ–¹å¼

- ==Selector==
	- é€‰ä¸­å…ƒç´ çš„è¡¨è¾¾å¼

- ==Time (ms)==
	- è·å–æ¯ä¸ªå…ƒç´ å®šä½å™¨çš„æ—¶é—´

###### æ¨¡å—3
- å…ƒç´ å¯¹åº”çš„å±æ€§åˆ—è¡¨
- ==Attribute==
	- å±æ€§å
- ==Value==
	- å±æ€§å€¼
